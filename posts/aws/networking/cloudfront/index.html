<!DOCTYPE html><html lang="en" class="scroll-smooth" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://thuongnn.dev/posts/aws/networking/cloudfront/"><meta name="generator" content="Astro v5.5.2"><!-- General Meta Tags --><title>[AWS] Amazon CloudFront | thuongnn.dev</title><meta name="title" content="[AWS] Amazon CloudFront | thuongnn.dev"><meta name="description" content="Tìm hiểu về dịch vụ CDN của AWS, giúp phân phối nội dung với hiệu suất cao và độ trễ thấp."><meta name="author" content="thuongnn"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="[AWS] Amazon CloudFront | thuongnn.dev"><meta property="og:description" content="Tìm hiểu về dịch vụ CDN của AWS, giúp phân phối nội dung với hiệu suất cao và độ trễ thấp."><meta property="og:url" content="https://thuongnn.dev/posts/aws/networking/cloudfront/"><meta property="og:image" content="https://thuongnn.dev/posts/aws/networking/cloudfront/index.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2023-05-11T10:20:15.000Z"><meta property="article:modified_time" content="2025-05-29T02:30:41.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://thuongnn.dev/posts/aws/networking/cloudfront/"><meta property="twitter:title" content="[AWS] Amazon CloudFront | thuongnn.dev"><meta property="twitter:description" content="Tìm hiểu về dịch vụ CDN của AWS, giúp phân phối nội dung với hiệu suất cao và độ trễ thấp."><meta property="twitter:image" content="https://thuongnn.dev/posts/aws/networking/cloudfront/index.png"><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"[AWS] Amazon CloudFront | thuongnn.dev","image":"https://thuongnn.dev/posts/aws/networking/cloudfront/index.png","datePublished":"2023-05-11T10:20:15.000Z","dateModified":"2025-05-29T02:30:41.000Z","author":[{"@type":"Person","name":"thuongnn","url":"https://thuongnn.dev/"}]}</script><!-- Enable RSS feed auto-discovery  --><!-- https://docs.astro.build/en/recipes/rss/#enabling-rss-feed-auto-discovery --><link rel="alternate" type="application/rss+xml" title="thuongnn.dev" href="https://thuongnn.dev/rss.xml"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CMTcOisY.js"></script><script src="/toggle-theme.js"></script><link rel="stylesheet" href="/_astro/about.BOtX_k-c.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style><style>[data-astro-transition-scope="astro-fam6wyqg-1"] { view-transition-name: aws-amazon-cloud-front; }@layer astro { ::view-transition-old(aws-amazon-cloud-front) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(aws-amazon-cloud-front) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(aws-amazon-cloud-front) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(aws-amazon-cloud-front) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: aws; }@layer astro { ::view-transition-old(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-3"] { view-transition-name: amazon-web-services; }@layer astro { ::view-transition-old(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-sckkx6r4>  <header> <a id="skip-to-content" href="#main-content" class="absolute -top-full left-16 z-50 bg-background px-3 py-2 text-accent backdrop-blur-lg transition-all focus:top-4">
Skip to content
</a> <div id="nav-container" class="mx-auto flex max-w-3xl flex-col items-center justify-between sm:flex-row"> <div id="top-nav-wrap" class="relative flex w-full items-baseline justify-between bg-background p-4 sm:items-center sm:py-6"> <a href="/" class="absolute py-1 text-2xl leading-7 font-semibold whitespace-nowrap sm:static"> thuongnn.dev </a> <nav id="nav-menu" class="flex w-full flex-col items-center sm:ml-2 sm:flex-row sm:justify-end sm:space-x-4 sm:py-0"> <button id="menu-btn" class="focus-outline self-end p-2 sm:hidden" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden" id="close-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-deep" id="menu-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 6h16" /><path d="M7 12h13" /><path d="M10 18h10" /></svg> </button> <ul id="menu-items" class="mt-4 grid w-44 grid-cols-2 place-content-center gap-2 [&#38;>li>a]:block [&#38;>li>a]:px-4 [&#38;>li>a]:py-3 [&#38;>li>a]:text-center [&#38;>li>a]:font-medium [&#38;>li>a]:hover:text-accent sm:[&#38;>li>a]:px-2 sm:[&#38;>li>a]:py-1 hidden sm:mt-0 sm:ml-0 sm:flex sm:w-auto sm:gap-x-5 sm:gap-y-0"> <li class="col-span-2"> <a href="/posts" class="active-nav">
Posts
</a> </li> <li class="col-span-2"> <div class="relative" id="tags-dropdown"> <a href="/tags" class="block px-4 py-3 text-center font-medium hover:text-accent sm:px-2 sm:py-1"> <span class="flex items-center justify-center gap-1">
Tags
<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path> </svg> </span> </a> <div class="absolute top-full left-0 z-50 mt-1 hidden w-48 rounded-md bg-white py-1 shadow-lg dark:bg-gray-800" id="tags-menu"> <ul class="pt-2 pb-1"> <li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/aws"> Amazon Web Services </a> </li><li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/google-cloud"> Google Cloud Platform </a> </li><li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/computer-science"> Computer Science </a> </li> </ul> </div> </div> </li> <li class="col-span-2"> <a href="/about">
About
</a> </li> <li class="col-span-2"> <a href="/archives" class="group inline-block hover:text-accent focus-outline flex justify-center p-3 sm:p-1" aria-label="archives" title="Archives"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:inline-block"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" /><path d="M10 12l4 0" /></svg> <span class="sm:sr-only">Archives</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <a href="/search" class="group inline-block hover:text-accent focus-outline flex p-3 sm:p-1" aria-label="search" title="Search"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg> <span class="sr-only">Search</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <button id="theme-btn" class="focus-outline relative size-12 p-4 sm:size-8 hover:[&>svg]:stroke-accent" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg> </button> </li> </ul> </nav> </div> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-border" aria-hidden="true"> </div> </header> <script type="module">function d(){const e=document.querySelector("#menu-btn"),t=document.querySelector("#menu-items"),n=document.querySelector("#menu-icon"),o=document.querySelector("#close-icon");!e||!t||!n||!o||e.addEventListener("click",()=>{const s=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",s?"false":"true"),e.setAttribute("aria-label",s?"Open Menu":"Close Menu"),t.classList.toggle("hidden"),n.classList.toggle("hidden"),o.classList.toggle("hidden")})}function u(){const e=document.getElementById("tags-dropdown"),t=document.getElementById("tags-menu");let n;!e||!t||(e.addEventListener("mouseenter",()=>{clearTimeout(n),t.classList.remove("hidden")}),e.addEventListener("mouseleave",()=>{n=setTimeout(()=>{t.classList.add("hidden")},100)}))}d();u();document.addEventListener("astro:after-swap",()=>{d(),u()});</script> <div class="mx-auto flex w-full max-w-3xl items-center justify-start px-2"><a id="back-button" href="/" class="group inline-block hover:text-accent focus-outline mt-8 mb-2 flex hover:text-foreground/75"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg><span>Go back</span></a></div><script type="module">function o(){const t=document.querySelector("#back-button"),e=sessionStorage.getItem("backUrl");e&&t&&(t.href=e)}document.addEventListener("astro:page-load",o);o();</script> <main id="main-content" class="mx-auto w-full max-w-3xl px-4 pb-12" data-pagefind-body> <h1 class="inline-block text-2xl font-bold text-accent sm:text-3xl" data-astro-transition-scope="astro-fam6wyqg-1"> [AWS] Amazon CloudFront </h1> <div class="flex items-center gap-4"> <div class="flex items-end space-x-2 opacity-80 my-2"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 min-w-[1.375rem]"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M7 14h.013" /><path d="M10.01 14h.005" /><path d="M13.01 14h.005" /><path d="M16.015 14h.005" /><path d="M13.015 17h.005" /><path d="M7.01 17h.005" /><path d="M10.01 17h.005" /></svg> <span class="text-sm italic sm:text-base">
Updated:
</span> <span class="text-sm italic sm:text-base"> <time datetime="2025-05-29T02:30:41.000Z">29 May, 2025</time> <span aria-hidden="true"> | </span> <span class="sr-only">&nbsp;at&nbsp;</span> <span class="text-nowrap">02:30 AM</span> </span> </div> <div class="opacity-80 max-sm:hidden"><span aria-hidden="true" class="max-sm:hidden">
|
</span><a class="space-x-1.5 hover:opacity-75" href="https://github.com/thuongnn/thuongnn.github.io/edit/master/src/data/blog/aws/networking/cloudfront.md" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span class="italic max-sm:text-sm sm:inline">Suggest Changes</span></a></div> </div> <article id="article" class="mx-auto prose mt-8 max-w-3xl"> <p>Bài viết được tham khảo và tổng hợp lại từ Jayendra’s Blog, xem bài viết gốc ở đây: <a href="https://jayendrapatil.com/aws-cloudfront">https://jayendrapatil.com/aws-cloudfront</a>.</p>
<h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#gi%E1%BB%9Bi-thi%E1%BB%87u">Giới thiệu</a></li>
<li><a href="#cloudfront-benefits"><strong>CloudFront Benefits</strong></a></li>
<li><a href="#edge-locations--regional-edge-caches"><strong>Edge Locations &#x26; Regional Edge Caches</strong></a></li>
<li><a href="#configuration--content-delivery">Configuration &#x26; Content Delivery</a>
<ul>
<li>
<ul>
<li><a href="#configuration"><strong>Configuration</strong></a></li>
<li><a href="#content-delivery-to-users"><strong>Content delivery to Users</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cloudfront-origins"><strong>CloudFront Origins</strong></a></li>
<li><a href="#cloudfront-origin-groups"><strong>CloudFront Origin Groups</strong></a></li>
<li><a href="#cloudfront-delivery-methods"><strong>CloudFront Delivery Methods</strong></a>
<ul>
<li>
<ul>
<li><a href="#web-distributions"><strong>Web distributions</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cache-behavior-settings"><strong>Cache Behavior Settings</strong></a>
<ul>
<li>
<ul>
<li><a href="#path-patterns"><strong>Path Patterns</strong></a></li>
<li><a href="#viewer-protocol-policy-viewer---cloudfront"><strong>Viewer Protocol Policy (Viewer -> CloudFront)</strong></a></li>
<li><a href="#origin-protocol-policy-cloudfront---origin">Origin Protocol Policy (CloudFront -> Origin)</a></li>
<li><a href="#https-connection"><strong>HTTPS Connection</strong></a></li>
<li><a href="#allowed-http-methods"><strong>Allowed HTTP methods</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cloudfront-edge-caches">CloudFront Edge Caches</a></li>
<li><a href="#object-caching--expiration">Object Caching &#x26; Expiration</a></li>
<li><a href="#cloudfront-origin-shield">CloudFront Origin Shield</a></li>
<li><a href="#serving-compressed-files">Serving Compressed Files</a></li>
<li><a href="#distribution-details">Distribution Details</a>
<ul>
<li>
<ul>
<li><a href="#price-class">Price Class</a></li>
<li><a href="#waf-web-acl">WAF Web ACL</a></li>
<li><a href="#alternate-domain-names-cnames">Alternate Domain Names (CNAMEs)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cloudfront-security"><strong>CloudFront Security</strong></a></li>
<li><a href="#access-logs">Access Logs</a></li>
<li><a href="#cloudfront-cost">CloudFront Cost</a></li>
</ul>
<p></p></details><p></p>
<h1 id="giới-thiệu">Giới thiệu</h1>
<ul>
<li>CloudFront là fully managed, fast content delivery network (CDN), giúp tăng tốc phân phối nội dung tĩnh, động trên web hoặc nội dung phát trực tuyến đến người dùng cuối.</li>
<li>CloudFront phân phối nội dung thông qua mạng lưới trung tâm dữ liệu toàn cầu được gọi là <strong>edge locations</strong> hoặc <strong>Point of Presence (POP)</strong>.</li>
<li>CloudFront cung cấp dữ liệu, video, ứng dụng và API một cách an toàn cho khách hàng trên toàn cầu với độ trễ thấp, tốc độ truyền tải cao.</li>
<li>CloudFront mang đến cho các doanh nghiệp và application developers một cách dễ dàng và tiết kiệm chi phí để phân phối nội dung với độ trễ thấp và tốc độ truyền tải dữ liệu cao.</li>
<li>CloudFront tăng tốc phân phối nội dung bằng cách định tuyến từng yêu cầu của người dùng đến <strong>edge location</strong> có khả năng phục vụ nội dung tốt nhất, từ đó cung cấp độ trễ thấp nhất.</li>
<li>CloudFront sử dụng <strong>AWS backbone network</strong>, giúp giảm đáng kể network hops mà yêu cầu của người dùng cần đi qua, từ đó cải thiện hiệu suất, giảm độ trễ và tăng tốc độ truyền dữ liệu.</li>
<li>CloudFront là một lựa chọn tốt cho việc phân phối nội dung tĩnh được truy cập thường xuyên, như hình ảnh, video, tệp phương tiện phổ biến trên trang web, hoặc các tệp phần mềm tải xuống, vốn được hưởng lợi từ việc phân phối qua <strong>edge delivery</strong>.</li>
</ul>
<h1 id="cloudfront-benefits"><strong>CloudFront Benefits</strong></h1>
<ul>
<li>CloudFront loại bỏ chi phí và sự phức tạp khi vận hành một mạng lưới các máy chủ cache ở nhiều địa điểm trên internet, đồng thời loại bỏ nhu cầu dự phòng quá mức về năng lực để xử lý các đợt tăng đột biến về lưu lượng truy cập.</li>
<li>CloudFront cũng cung cấp độ tin cậy và khả năng sẵn sàng cao hơn nhờ các bản sao của đối tượng được lưu trữ tại nhiều <strong>edge locations</strong> trên toàn thế giới.</li>
<li>CloudFront duy trì các kết nối lâu dài với origin servers để có thể truy xuất các tệp từ origin servers một cách nhanh nhất.</li>
<li>CloudFront sử dụng các kỹ thuật như hợp nhất các yêu cầu đồng thời của người xem tại một <strong>edge location</strong> đối với cùng một tệp thành một yêu cầu duy nhất đến máy chủ gốc, giúp giảm tải cho máy chủ gốc.</li>
<li>CloudFront cung cấp các tính năng bảo mật bao gồm field-level encryption và hỗ trợ HTTPS.</li>
<li>CloudFront tích hợp liền mạch với AWS Shield, AWS Web Application Firewall (WAF) và Route 53 để bảo vệ chống lại nhiều loại tấn công, bao gồm các cuộc tấn công DDoS ở cấp mạng và cấp ứng dụng.</li>
</ul>
<h1 id="edge-locations--regional-edge-caches"><strong>Edge Locations &#x26; Regional Edge Caches</strong></h1>
<p><img alt="1.png" sizes="(min-width: 974px) 974px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 974; --h: 594;" data-astro-image="responsive" width="974" height="594" src="/_astro/1.w23hviAj_ZckIyR.webp" srcset="/_astro/1.w23hviAj_1KUbwx.webp 640w, /_astro/1.w23hviAj_Z17sF7F.webp 750w, /_astro/1.w23hviAj_ZMvozP.webp 828w, /_astro/1.w23hviAj_ZckIyR.webp 974w"></p>
<ul>
<li>CloudFront <strong>Edge Locations</strong> hay <strong>POPs</strong> đảm bảo rằng nội dung phổ biến có thể được phục vụ nhanh chóng đến người xem.</li>
<li>CloudFront cũng có <strong>Regional Edge Caches</strong>, giúp đưa nhiều nội dung lại gần hơn với người xem, ngay cả khi nội dung đó không đủ phổ biến để duy trì tại một POP, từ đó cải thiện hiệu suất cho nội dung đó.</li>
<li><strong>Regional Edge Caches</strong> được triển khai toàn cầu, gần với người xem, và nằm giữa các máy chủ gốc và các <strong>Edge Locations</strong>.</li>
<li><strong>Regional Edge Caches</strong> hỗ trợ nhiều <strong>Edge Locations</strong> và có kích thước bộ nhớ cache lớn hơn, giúp các đối tượng lưu trữ lâu hơn tại các địa điểm <strong>Regional Edge Cache</strong> gần nhất.</li>
<li><strong>Regional Edge Caches</strong> hỗ trợ tất cả các loại nội dung, đặc biệt là các nội dung có xu hướng trở nên ít phổ biến theo thời gian.</li>
</ul>
<h1 id="configuration--content-delivery">Configuration &#x26; Content Delivery</h1>
<p><img alt="2.png" sizes="(min-width: 598px) 598px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 598; --h: 500;" data-astro-image="responsive" width="598" height="500" src="/_astro/2.DA7wWHur_hM9YX.webp" srcset="/_astro/2.DA7wWHur_hM9YX.webp 598w"></p>
<h3 id="configuration"><strong>Configuration</strong></h3>
<ul>
<li>Các <strong>origin servers</strong> cần được cấu hình để lấy các tệp cho việc phân phối. Một <strong>origin server</strong> lưu trữ phiên bản gốc, xác thực của các đối tượng và có thể là một dịch vụ được lưu trữ trên AWS, ví dụ như S3, EC2, hoặc một máy chủ tại chỗ (on-premise server).</li>
<li>Tệp hoặc đối tượng có thể được thêm lên hoặc tải lên các Origin servers với quyền đọc công khai hoặc quyền hạn chế cho Origin Access Identity (OAI). Tạo một CloudFront distribution, giúp CloudFront biết từ các origin servers nào sẽ lấy các tệp khi người dùng yêu cầu chúng.</li>
<li>CloudFront gửi cấu hình phân phối đến tất cả các edge locations. Trang web có thể được sử dụng với tên miền do CloudFront cung cấp hoặc tên miền thay thế tùy chỉnh.</li>
<li>Một origin server có thể được cấu hình để limit access protocols, caching behaviour, hay thêm các headers vào các tệp để thêm TTL hoặc expiration time.</li>
</ul>
<h3 id="content-delivery-to-users"><strong>Content delivery to Users</strong></h3>
<ul>
<li>Khi người dùng truy cập trang web, tệp hoặc đối tượng – DNS sẽ chuyển hướng yêu cầu đến <strong>CloudFront edge location</strong> có thể phục vụ yêu cầu của người dùng nhanh nhất với độ trễ thấp nhất.</li>
<li>CloudFront sẽ trả lại đối tượng ngay lập tức nếu đối tượng yêu cầu có sẵn trong bộ nhớ cache tại <strong>Edge location.</strong></li>
<li>Nếu đối tượng yêu cầu không có trong bộ nhớ cache tại <strong>edge location</strong>, POP thường sẽ đi đến <strong>regional edge cache</strong> gần nhất để lấy nó. Nếu đối tượng có trong <strong>regional edge cache</strong>, CloudFront sẽ chuyển tiếp nó đến <strong>POP</strong> đã yêu cầu.</li>
<li>Đối với các đối tượng không có trong bộ nhớ cache tại cả <strong>POP</strong> lẫn <strong>regional edge cache</strong>, các đối tượng sẽ được yêu cầu từ <strong>origin server</strong> và trả lại cho người dùng thông qua <strong>regional edge cache</strong> và <strong>POP</strong>.</li>
<li>CloudFront bắt đầu chuyển đối tượng đến người dùng ngay khi byte đầu tiên đến từ <strong>regional edge cache</strong>.</li>
<li>CloudFront cũng sẽ thêm đối tượng vào bộ nhớ cache tại <strong>regional edge cache</strong> ngoài <strong>POP</strong> để lần yêu cầu tiếp theo của người xem được phục vụ nhanh hơn. Khi đối tượng hết thời gian hết hạn, đối với các yêu cầu mới, CloudFront sẽ kiểm tra với <strong>origin server</strong> để xem có phiên bản mới nhất không, nếu có nó sẽ sử dụng đối tượng đó. Nếu <strong>origin server</strong> có phiên bản mới nhất, phiên bản đó sẽ được lấy, phục vụ cho người dùng và lưu vào bộ nhớ cache</li>
</ul>
<h1 id="cloudfront-origins"><strong>CloudFront Origins</strong></h1>
<ul>
<li>Mỗi origin có thể là một <strong>S3 bucket</strong>, một <strong>MediaStore container</strong>, một <strong>MediaPackage channel</strong>, hoặc một <strong>custom origin</strong> như một <strong>EC2 instance</strong> hoặc một <strong>HTTP server</strong>.</li>
<li>Đối với <strong>S3 bucket</strong>, bạn sử dụng URL của bucket hoặc URL của <strong>static website endpoint</strong>, và các tệp cần phải có quyền đọc công khai hoặc được bảo vệ bằng <strong>OAI (Origin Access Identity)</strong>.</li>
<li><strong>Origin restrict access</strong>, chỉ đối với <strong>S3</strong>, có thể được cấu hình thông qua <strong>Origin Access Identity</strong> để ngăn chặn việc truy cập trực tiếp vào các đối tượng S3.</li>
<li>Đối với <strong>HTTP server</strong> làm origin, tên miền của tài nguyên cần phải được ánh xạ và các tệp phải có quyền đọc công khai.</li>
<li>Một <strong>Distribution</strong> có thể có nhiều origin cho mỗi bucket với một hoặc nhiều <strong>cache behaviors</strong> để chuyển hướng yêu cầu đến từng origin. <strong>Path pattern</strong> trong một <strong>cache behavior</strong> xác định yêu cầu nào sẽ được chuyển hướng đến <strong>origin</strong> (S3 bucket) liên kết với <strong>cache behavior</strong> đó.</li>
</ul>
<h1 id="cloudfront-origin-groups"><strong>CloudFront Origin Groups</strong></h1>
<p><img alt="3.png" sizes="(min-width: 1024px) 1024px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 1024; --h: 535;" data-astro-image="responsive" width="1024" height="535" src="/_astro/3.DNoWBj_d_2qzwXs.webp" srcset="/_astro/3.DNoWBj_d_Z1HiKGu.webp 640w, /_astro/3.DNoWBj_d_Z1IPhzw.webp 750w, /_astro/3.DNoWBj_d_Z28C4zp.webp 828w, /_astro/3.DNoWBj_d_2qzwXs.webp 1024w"></p>
<ul>
<li><strong>Origin Groups</strong> có thể được sử dụng để chỉ định hai origins nhằm cấu hình <strong>origin failover</strong> cho tính năng <strong>high availability</strong>.</li>
<li><strong>Origin failover</strong> có thể được sử dụng để chỉ định một <strong>primary origin</strong> và một <strong>secondary origin</strong>, mà CloudFront sẽ tự động chuyển sang khi <strong>primary origin</strong> trả về mã lỗi HTTP cụ thể.</li>
<li>CloudFront sẽ chuyển hướng tất cả các yêu cầu đến <strong>primary origin</strong>, ngay cả khi một yêu cầu trước đó đã failover sang <strong>secondary origin</strong>. CloudFront chỉ gửi yêu cầu đến <strong>secondary origin</strong> sau khi một yêu cầu bị lỗi từ <strong>primary origin</strong>.</li>
<li>CloudFront chỉ failover sang <strong>secondary origin</strong> khi <strong>HTTP method</strong> của yêu cầu người dùng là <strong>GET</strong>, <strong>HEAD</strong>, hoặc <strong>OPTIONS</strong> và không failover khi người dùng gửi một phương thức HTTP khác (ví dụ <strong>POST</strong>, <strong>PUT</strong>, v.v.).</li>
</ul>
<h1 id="cloudfront-delivery-methods"><strong>CloudFront Delivery Methods</strong></h1>
<h3 id="web-distributions"><strong>Web distributions</strong></h3>
<ul>
<li>Hỗ trợ cả nội dung tĩnh và động như HTML, CSS, JS, hình ảnh, v.v. thông qua HTTP hoặc HTTPS.</li>
<li>Hỗ trợ nội dung đa phương tiện theo yêu cầu thông qua <strong>progressive download</strong> và <strong>Apple HTTP Live Streaming (HLS)</strong>.</li>
<li>Hỗ trợ các sự kiện trực tiếp, như cuộc họp, hội nghị, hoặc buổi hòa nhạc, trong thời gian thực. Đối với live streaming, phân phối có thể được tạo tự động bằng cách sử dụng <strong>AWS CloudFormation stack</strong>.</li>
<li>Các <strong>origin servers</strong> có thể là <strong>S3 bucket</strong> hoặc một <strong>HTTP server</strong>, ví dụ như một <strong>web server</strong> hoặc <strong>AWS ELB</strong>, v.v.</li>
</ul>
<h1 id="cache-behavior-settings"><strong>Cache Behavior Settings</strong></h1>
<h3 id="path-patterns"><strong>Path Patterns</strong></h3>
<ul>
<li><strong>Path Patterns</strong> giúp xác định đường dẫn nào sẽ áp dụng cho <strong>Cache behavior</strong></li>
<li>Một pattern mặc định (*) được tạo ra và có thể thêm nhiều <strong>cache distributions</strong> với các patterns khác nhau, các pattern này sẽ có ưu tiên cao hơn so với đường dẫn mặc định.</li>
</ul>
<h3 id="viewer-protocol-policy-viewer---cloudfront"><strong>Viewer Protocol Policy (Viewer -> CloudFront)</strong></h3>
<ul>
<li><strong>Viewer Protocol Policy</strong> có thể được cấu hình để xác định giao thức truy cập được phép.</li>
<li>Giữa CloudFront và người dùng, phân phối cache có thể được cấu hình để hỗ trợ:
<ul>
<li><strong>HTTPS only</strong> – chỉ hỗ trợ HTTPS.</li>
<li><strong>HTTP and HTTPS</strong> – hỗ trợ cả HTTP và HTTPS.</li>
<li><strong>HTTP redirected to HTTPS</strong> – HTTP sẽ tự động chuyển hướng sang HTTPS.</li>
</ul>
</li>
</ul>
<h3 id="origin-protocol-policy-cloudfront---origin">Origin Protocol Policy (CloudFront -> Origin)</h3>
<ul>
<li>Giữa CloudFront và Origin, phân phối cache có thể được cấu hình với các tùy chọn sau:
<ul>
<li><strong>HTTP only</strong> (dành cho S3 static website) – chỉ sử dụng HTTP.</li>
<li><strong>HTTPS only</strong> – CloudFront lấy các đối tượng từ origin bằng cách sử dụng HTTPS.</li>
<li><strong>Match Viewer</strong> – CloudFront sử dụng giao thức mà người dùng đã sử dụng để yêu cầu các đối tượng.</li>
</ul>
</li>
<li>Đối với S3 làm origin:
<ul>
<li><strong>Đối với website</strong>, giao thức phải là HTTP vì HTTPS không được hỗ trợ.</li>
<li><strong>Đối với S3 bucket</strong>, chính sách giao thức mặc định giữa CloudFront và Origin là <strong>Match Viewer</strong> và không thể thay đổi. Do đó, khi CloudFront được cấu hình yêu cầu HTTPS giữa viewer và CloudFront, nó tự động sử dụng HTTPS để giao tiếp với S3</li>
</ul>
</li>
</ul>
<h3 id="https-connection"><strong>HTTPS Connection</strong></h3>
<p>CloudFront có thể được cấu hình để làm việc với HTTPS cho các tên miền thay thế bằng hai phương pháp sau:</p>
<ul>
<li><strong>Sử dụng Địa Chỉ IP Riêng Biệt</strong>
<ul>
<li>CloudFront liên kết một <strong>tên miền thay thế</strong> với một <strong>địa chỉ IP riêng biệt</strong>.</li>
<li><strong>Chứng chỉ SSL/TLS</strong> được liên kết với địa chỉ IP khi có yêu cầu từ máy chủ DNS cho địa chỉ IP đó.</li>
<li>Địa chỉ IP được CloudFront sử dụng để xác định phân phối, và chứng chỉ SSL/TLS sẽ được trả về cho người dùng.</li>
<li>Phương pháp này hoạt động cho mọi yêu cầu HTTPS, bất kể trình duyệt hay người dùng sử dụng. Việc sử dụng địa chỉ IP riêng biệt sẽ phát sinh chi phí khoảng <strong>600 USD/tháng</strong>.</li>
<li>Địa chỉ IP riêng biệt cho phép CloudFront phục vụ nhiều tên miền trên cùng một IP mà không bị nhầm lẫn.</li>
</ul>
</li>
<li><strong>Sử dụng Server Name Indication (SNI)</strong>
<ul>
<li><strong>SNI (Server Name Indication)</strong> là một phần mở rộng của giao thức TLS cho phép nhiều tên miền được phục vụ từ cùng một địa chỉ IP.</li>
<li>CloudFront sử dụng <strong>SNI Custom SSL</strong> để ánh xạ tên miền thay thế tới một địa chỉ IP mà không yêu cầu địa chỉ IP riêng biệt.</li>
<li><strong>SNI</strong> gửi tên miền trong <strong>TLS handshake</strong> tới CloudFront, sau đó CloudFront sẽ sử dụng tên miền để chọn chứng chỉ SSL/TLS phù hợp.</li>
<li><strong>SNI</strong> cho phép CloudFront phục vụ HTTPS cho nhiều tên miền sử dụng cùng một địa chỉ IP.</li>
<li><strong>SNI Custom SSL</strong> có sẵn mà không phải trả thêm chi phí ngoài các khoản phí chuyển dữ liệu và yêu cầu của CloudFront.</li>
<li>SNI được hỗ trợ bởi hầu hết các trình duyệt hiện tại, nhưng các trình duyệt cũ hơn có thể không hỗ trợ, điều này có thể gây vấn đề cho người dùng sử dụng trình duyệt cũ.</li>
</ul>
</li>
<li><strong>End-to-End HTTPS connections</strong> - để đảm bảo mã hóa toàn bộ (HTTPS) cho việc phân phối nội dung, chứng chỉ SSL/TLS cần được áp dụng cả giữa:
<ul>
<li><strong>HTTPS giữa viewers và CloudFront</strong>
<ul>
<li>Chứng chỉ được cấp bởi trusted certificate authority (CA) ví dụ như Comodo, DigiCert, or Symantec.</li>
<li>Chứng chỉ được cấp bởi <a href="https://jayendrapatil.com/aws-certificate-manager-acm/">AWS Certificate Manager</a> (ACM).</li>
</ul>
</li>
<li><strong>HTTPS giữa CloudFront và the Custom Origin</strong>
<ul>
<li>Nếu origin không phải là <strong>Elastic Load Balancer (ELB)</strong>, chứng chỉ phải được cấp bởi trusted CA như Comodo, DigiCert, or Symantec.</li>
<li>Nếu origin là <strong>ELB</strong>, chứng chỉ có thể được cấp bởi <strong>ACM</strong>.</li>
<li><strong>Self-signed certificates</strong> <strong>không thể</strong> được sử dụng cho kết nối HTTPS giữa CloudFront và origin.</li>
</ul>
</li>
</ul>
</li>
<li><strong>ACM certificate</strong>
<ul>
<li>Nếu sử dụng <strong>ACM</strong> cho CloudFront, chứng chỉ <strong>phải được requested hoặc imported</strong> ở region <strong>US East (N. Virginia)</strong>.</li>
<li>Các ACM certificate ở region <strong>US East (N. Virginia)</strong> sẽ được <strong>phân phối</strong> tới tất cả các vị trí địa lý liên kết với phân phối CloudFront.</li>
</ul>
</li>
</ul>
<h3 id="allowed-http-methods"><strong>Allowed HTTP methods</strong></h3>
<ul>
<li>CloudFront hỗ trợ các phương thức HTTP để thực hiện các tác vụ khác nhau với các đối tượng, bao gồm GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE.
<ul>
<li>GET, HEAD</li>
<li>GET, HEAD, OPTIONS</li>
<li>GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE</li>
</ul>
</li>
<li>CloudFront chỉ <strong>cache</strong> các phản hồi từ các yêu cầu <strong>GET</strong> và <strong>HEAD</strong> và, nếu cần, có thể cache các phản hồi từ yêu cầu <strong>OPTIONS</strong>. Các phương thức <strong>PUT, POST, PATCH, DELETE</strong> không được cache bởi CloudFront và luôn được chuyển tiếp đến <strong>Origin</strong>.</li>
<li><strong>PUT, POST, HTTP method</strong> có thể giúp <strong>tăng tốc quá trình tải nội dung</strong>. Khi sử dụng các phương thức này, yêu cầu sẽ được chuyển đến <strong>Origin</strong> (ví dụ như S3) qua <strong>vị trí edge của CloudFront</strong>, giúp cải thiện hiệu suất và giảm độ trễ. Quá trình này cũng giúp ứng dụng tận dụng các kết nối <strong>kiểm soát liên tục và giám sát</strong> mà CloudFront duy trì giữa các vị trí edge và các máy chủ origin.</li>
</ul>
<h1 id="cloudfront-edge-caches">CloudFront Edge Caches</h1>
<ul>
<li>Kiểm soát <code>max-age</code> của bộ nhớ đệm
<ul>
<li>Để tăng tỷ lệx2 <strong>cache hit</strong> (tỷ lệ truy cập thành công từ bộ nhớ đệm), máy chủ gốc (origin) có thể được cấu hình để thêm chỉ thị <code>Cache-Control: max-age</code> vào các object.</li>
<li>Khoảng thời gian càng dài, object sẽ càng ít được truy xuất từ máy chủ gốc.</li>
</ul>
</li>
<li>Bộ nhớ đệm dựa trên <strong>Query String Parameters</strong>
<ul>
<li><strong>CloudFront</strong> có thể được cấu hình để caching dựa trên query parameters:
<ul>
<li><strong>None (Improves Caching)</strong>
<ul>
<li>Sử dụng khi máy chủ gốc (origin) trả về cùng một phiên bản của object <strong>bất kể</strong> giá trị của các tham số query string.</li>
<li>Điều này cải thiện hiệu suất bộ nhớ đệm vì CloudFront chỉ lưu trữ một phiên bản duy nhất.</li>
</ul>
</li>
<li><strong>Forward all, cache based on whitelist</strong>
<ul>
<li>Sử dụng khi máy chủ gốc trả về <strong>các phiên bản khác nhau</strong> của object dựa trên một hoặc nhiều tham số query string.</li>
<li>Bạn cần chỉ định các tham số muốn CloudFront sử dụng làm cơ sở để caching trong trường <strong>Query String Whitelist</strong>.</li>
</ul>
</li>
<li><strong>Forward all, cache based on all</strong>
<ul>
<li>Sử dụng khi máy chủ gốc trả về <strong>các phiên bản khác nhau</strong> của object cho <strong>tất cả các tham số query string</strong>.</li>
</ul>
</li>
</ul>
</li>
<li>Cải thiện hiệu suất bộ nhớ đệm bằng cách:
<ul>
<li>Đảm bảo rằng <strong>chỉ các tham số thực sự ảnh hưởng đến kết quả trả về từ máy chủ gốc</strong> mới được chuyển tiếp.</li>
<li>Sử dụng <strong>cùng một kiểu chữ</strong> cho giá trị của các tham số. Ví dụ: Nếu giá trị tham số là <code>A</code> hoặc <code>a</code>, CloudFront sẽ caching hai yêu cầu khác nhau, ngay cả khi phản hồi hoặc object trả về giống hệt nhau.</li>
<li>Sử dụng <strong>cùng một thứ tự tham số</strong>. Ví dụ: Với yêu cầu <code>a=x&#x26;b=y</code> và <code>b=y&#x26;a=x</code>, CloudFront sẽ caching hai yêu cầu khác nhau, mặc dù phản hồi hoặc object trả về giống hệt nhau.</li>
</ul>
</li>
</ul>
</li>
<li>Bộ nhớ đệm dựa trên <strong>Cookie Values</strong>
<ul>
<li>CloudFront có thể được cấu hình để caching dựa trên giá trị cookie.</li>
<li>Theo mặc định, CloudFront không xem xét cookie khi lưu trữ bộ nhớ đệm trên các edge location.</li>
<li>Cải thiện hiệu suất bộ nhớ đệm bằng cách:
<ul>
<li><strong>Cấu hình CloudFront chỉ chuyển tiếp các cookie cụ thể thay vì chuyển tiếp tất cả cookie:</strong>
<em>Ví dụ: nếu yêu cầu có 2 cookie với 3 giá trị có thể, CloudFront sẽ lưu trữ tất cả các tổ hợp có thể xảy ra ngay cả khi phản hồi chỉ phụ thuộc vào một cookie.</em></li>
<li><strong>Tên và giá trị của cookie có phân biệt chữ hoa và chữ thường:</strong> Do đó, nên sử dụng một quy tắc thống nhất về kiểu chữ để tránh tạo ra các bản sao không cần thiết.</li>
<li><strong>Tạo các cache behavior riêng biệt cho nội dung tĩnh và động, và chỉ cấu hình CloudFront chuyển tiếp cookie đến origin cho nội dung động:</strong>
<em>Ví dụ: đối với các tệp CSS, cookie không có ý nghĩa vì nội dung không thay đổi dựa trên giá trị cookie.</em></li>
<li><strong>Nếu có thể, tạo các cache behavior riêng biệt cho nội dung động mà cookie có giá trị duy nhất cho mỗi người dùng (như ID người dùng) và nội dung động thay đổi dựa trên số lượng giá trị duy nhất nhỏ hơn.</strong>
<em>Ví dụ như một ID người dùng duy nhất. Trong trường hợp này, mỗi yêu cầu sẽ có một giá trị cookie khác nhau, dẫn đến việc CloudFront phải lưu trữ một phiên bản riêng cho từng người dùng. Điều này làm tăng số lượng bản sao trong bộ nhớ đệm và giảm hiệu suất.</em></li>
</ul>
</li>
</ul>
</li>
<li>Bộ nhớ đệm dựa trên <strong>Request Headers</strong>
<ul>
<li>CloudFront có thể được cấu hình để caching dựa trên các giá trị của request headers.</li>
<li>Theo mặc định, CloudFront không xem xét các header khi lưu trữ object trong các edge location.</li>
<li>Khi cấu hình CloudFront để caching dựa trên request headers, điều này không thay đổi các header mà CloudFront chuyển tiếp, mà chỉ xác định xem CloudFront có caching các đối tượng dựa trên giá trị của header hay không.</li>
<li>Cải thiện hiệu suất bộ nhớ đệm bằng cách:
<ul>
<li>Cấu hình CloudFront để chuyển tiếp và caching dựa trên các header cụ thể thay vì dựa trên tất cả các header.</li>
<li>Tránh caching dựa trên các request header có quá nhiều giá trị duy nhất.</li>
<li>Khi CloudFront được cấu hình để chuyển tiếp tất cả header đến origin, CloudFront sẽ không caching các object liên kết với cache behavior này. Thay vào đó, mọi yêu cầu sẽ được gửi đến origin.</li>
<li>Khi CloudFront caching dựa trên giá trị của header, nó không phân biệt chữ hoa và chữ thường của <strong>tên header</strong> nhưng có xét đến <strong>chữ hoa và chữ thường</strong> của <strong>giá trị header</strong>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="object-caching--expiration">Object Caching &#x26; Expiration</h1>
<ul>
<li>Thời gian hết hạn của object xác định khoảng thời gian các object được lưu trữ trong bộ nhớ đệm của CloudFront trước khi nó truy xuất lại từ Origin.</li>
<li>Thời gian hết hạn ngắn giúp phục vụ nội dung thay đổi thường xuyên, trong khi thời gian hết hạn dài giúp cải thiện hiệu suất và giảm tải cho origin.</li>
<li>Theo mặc định, mỗi object sẽ tự động hết hạn sau 24 giờ.</li>
<li>Sau khi hết hạn, CloudFront sẽ kiểm tra xem phiên bản mới nhất có sẵn không:
<ul>
<li>Nếu bộ nhớ đệm đã có phiên bản mới nhất, origin sẽ trả về mã trạng thái <strong>304</strong> (Not Modified).</li>
<li>Nếu bộ nhớ đệm của CloudFront không có phiên bản mới nhất, origin sẽ trả về mã trạng thái <strong>200</strong> (OK) kèm theo phiên bản mới nhất của object.</li>
</ul>
</li>
<li>Nếu một object trong edge location không được yêu cầu thường xuyên, CloudFront có thể loại bỏ object đó trước thời gian hết hạn để dành không gian cho các object được yêu cầu gần đây hơn.</li>
<li>Đối với Web distributions, hành vi mặc định có thể thay đổi như sau:
<ul>
<li><strong>Cho toàn bộ đường dẫn</strong>: Cache behavior có thể được cấu hình bằng cách thiết lập các giá trị <strong>Minimum TTL</strong>, <strong>Maximum TTL</strong>, và <strong>Default TTL</strong>.</li>
<li><strong>Cho từng object riêng lẻ</strong>: Origin có thể được cấu hình để thêm <code>Cache-Control max-age</code>, <code>Cache-Control s-maxage</code>, hoặc trường header <code>Expires</code> cho object.</li>
<li>AWS khuyến nghị sử dụng <code>Cache-Control max-age</code> thay vì trường header <code>Expires</code> để kiểm soát hành vi lưu đệm của object.</li>
<li>CloudFront chỉ sử dụng giá trị của <code>Cache-Control max-age</code> nếu cả <code>Cache-Control max-age</code> và <code>Expires</code> đều được chỉ định.</li>
<li>Các trường header <code>HTTP Cache-Control</code> hoặc <code>Pragma</code> trong yêu cầu <strong>GET</strong> từ viewer không thể ép buộc CloudFront truy xuất lại object từ origin server.</li>
<li>Theo mặc định, khi origin trả về mã trạng thái HTTP <strong>4xx</strong> hoặc <strong>5xx</strong>, CloudFront sẽ lưu đệm các phản hồi lỗi này trong vòng <strong>5 phút</strong>, sau đó gửi yêu cầu tiếp theo đến origin để kiểm tra xem object đã sẵn có hay sự cố đã được khắc phục hay chưa.</li>
</ul>
</li>
</ul>
<h1 id="cloudfront-origin-shield">CloudFront Origin Shield</h1>
<ul>
<li><strong>CloudFront Origin Shield</strong> cung cấp một lớp bổ sung trong hạ tầng bộ nhớ đệm của CloudFront giúp giảm tải cho origin, cải thiện khả năng sẵn sàng và giảm chi phí vận hành của nó.</li>
<li><strong>Origin Shield</strong> cung cấp một lớp bộ nhớ đệm tập trung giúp tăng <strong>cache hit ratio</strong> để giảm tải cho origin.</li>
<li><strong>Origin Shield</strong> giảm chi phí vận hành của origin bằng cách hợp nhất các yêu cầu qua các khu vực, sao cho chỉ có một yêu cầu duy nhất được gửi đến origin cho mỗi object.</li>
<li><strong>Origin Shield</strong> có thể được cấu hình bằng cách chọn <strong>Regional Edge Cache</strong> gần nhất với origin để trở thành <strong>Origin Shield Region</strong>.</li>
<li><strong>CloudFront Origin Shield</strong> có lợi cho nhiều trường hợp sử dụng như:
<ul>
<li>Các viewer phân bố ở các vùng địa lý khác nhau.</li>
<li>Các origin cung cấp đóng gói theo yêu cầu cho phát trực tiếp hoặc xử lý ảnh động.</li>
<li>Các origin on-premises có giới hạn về công suất hoặc băng thông.</li>
<li>Các workloads sử dụng nhiều content delivery networks (CDNs).</li>
</ul>
</li>
</ul>
<h1 id="serving-compressed-files">Serving Compressed Files</h1>
<ul>
<li><strong>CloudFront</strong> có thể được cấu hình để tự động nén các tệp của một số loại nhất định và phục vụ các tệp đã nén khi yêu cầu của viewer bao gồm <code>Accept-Encoding</code> trong tiêu đề yêu cầu.</li>
<li>Việc nén nội dung giúp tải xuống nhanh hơn vì các tệp nhỏ hơn, đồng thời cũng giúp giảm chi phí vì chi phí chuyển dữ liệu của <strong>CloudFront</strong> dựa trên tổng lượng dữ liệu được phục vụ.</li>
<li><strong>CloudFront</strong> có thể nén các đối tượng bằng các định dạng nén <strong>Gzip</strong> và <strong>Brotli</strong>.</li>
<li>Nếu phục vụ từ một custom origin, nó có thể được cấu hình để:
<ul>
<li>Có thể chọn liệu tệp có được nén bởi <strong>CloudFront</strong> hay không. Nếu muốn, chúng ta có thể để origin tự nén tệp trước khi gửi về <strong>CloudFront</strong>, hoặc để <strong>CloudFront</strong> tự nén tệp khi nó nhận được yêu cầu từ viewer.</li>
<li>Mặc dù <strong>CloudFront</strong> hỗ trợ nén nhiều loại tệp (như HTML, CSS, JS…), nhưng một số loại tệp không được <strong>CloudFront</strong> tự động nén.</li>
</ul>
</li>
<li>Nếu origin trả về một tệp đã nén, <strong>CloudFront</strong> sẽ phát hiện sự nén qua giá trị tiêu đề <code>Content-Encoding</code> và không nén lại tệp đó.</li>
<li><strong>CloudFront</strong> phục vụ nội dung bằng cách nén như sau:
<ol>
<li>Một phân phối <strong>CloudFront</strong> được tạo ra và cấu hình để nén nội dung.</li>
<li>Một viewer yêu cầu một tệp đã nén bằng cách thêm tiêu đề <code>Accept-Encoding</code> bao gồm <code>gzip</code>, <code>br</code> hoặc cả hai vào yêu cầu.</li>
<li>Tại edge location, <strong>CloudFront</strong> kiểm tra cache để tìm phiên bản nén của tệp được tham chiếu trong yêu cầu.</li>
<li>Nếu tệp đã nén có sẵn trong bộ nhớ đệm, <strong>CloudFront</strong> trả lại tệp cho viewer và bỏ qua các bước còn lại.</li>
<li>Nếu tệp nén không có trong bộ nhớ đệm, <strong>CloudFront</strong> chuyển yêu cầu đến máy chủ origin (S3 bucket hoặc custom origin).</li>
<li>Ngay cả khi <strong>CloudFront</strong> có phiên bản chưa nén của tệp trong bộ nhớ đệm, nó vẫn chuyển yêu cầu đến origin.</li>
<li>Máy chủ origin trả về phiên bản chưa nén của tệp yêu cầu.</li>
<li><strong>CloudFront</strong> xác định xem tệp có thể nén được hay không:
<ul>
<li>Tệp phải thuộc loại mà <strong>CloudFront</strong> có thể nén.</li>
<li>Kích thước tệp phải nằm trong khoảng từ 1,000 đến 10,000,000 byte.</li>
<li>Phản hồi phải bao gồm tiêu đề <code>Content-Length</code> để xác định kích thước trong giới hạn nén hợp lệ. Nếu thiếu tiêu đề <code>Content-Length</code>, <strong>CloudFront</strong> sẽ không nén tệp.</li>
<li>Giá trị của tiêu đề <code>Content-Encoding</code> trên tệp phải không phải là <code>gzip</code>, tức là origin đã nén tệp.</li>
<li>Phản hồi phải có nội dung (body).</li>
<li>Mã trạng thái HTTP của phản hồi phải là 200, 403 hoặc 404.</li>
</ul>
</li>
<li>Nếu tệp có thể nén, <strong>CloudFront</strong> sẽ nén tệp, trả lại tệp nén cho viewer và caching.</li>
<li>Viewer giải nén tệp.</li>
</ol>
</li>
</ul>
<h1 id="distribution-details">Distribution Details</h1>
<h3 id="price-class">Price Class</h3>
<ul>
<li>CloudFront có các edge locations trên toàn thế giới và chi phí cho mỗi edge locations khác nhau, đồng thời mức giá tính cho việc phục vụ các yêu cầu cũng khác nhau.</li>
<li>Các edge locations của CloudFront được nhóm thành các khu vực địa lý, và các khu vực này đã được nhóm thành các lớp giá:
<ul>
<li><strong>Price Class</strong> – Bao gồm tất cả các khu vực.</li>
<li><strong>Price Class 200</strong> – Bao gồm tất cả các khu vực ngoại trừ Nam Mỹ và Australia &#x26; New Zealand.</li>
<li><strong>Price Class 100</strong> – Bao gồm các khu vực có giá rẻ nhất (Khu vực Bắc Mỹ và Châu Âu).</li>
</ul>
</li>
<li>Price class có thể được chọn để giảm chi phí, nhưng điều này sẽ đi kèm với việc giảm hiệu suất (độ trễ cao hơn), vì CloudFront sẽ chỉ phục vụ yêu cầu từ các edge locations trong lớp giá đã chọn.</li>
<li>Đôi khi, CloudFront có thể phục vụ yêu cầu từ một khu vực không nằm trong lớp giá, tuy nhiên, bạn sẽ bị tính phí theo mức giá của khu vực có chi phí thấp nhất trong lớp giá đã chọn.</li>
</ul>
<h3 id="waf-web-acl">WAF Web ACL</h3>
<ul>
<li>AWS WAF có thể được sử dụng để cho phép hoặc chặn các yêu cầu dựa trên các tiêu chí đã chỉ định, chọn web ACL để liên kết với phân phối này.</li>
</ul>
<h3 id="alternate-domain-names-cnames">Alternate Domain Names (CNAMEs)</h3>
<ul>
<li>Mặc định, CloudFront gán một tên miền cho phân phối, ví dụ: <code>d111111abcdef8.cloudfront.net</code></li>
<li>Một tên miền thay thế, còn được gọi là CNAME, có thể được sử dụng để sử dụng tên miền tùy chỉnh của riêng bạn cho các liên kết đến các object.</li>
<li>CloudFront hỗ trợ * wildcard ở đầu domain thay vì chỉ định các subdomain riêng lẻ.</li>
<li>Tuy nhiên, wildcard không thể thay thế một phần của subdomain, ví dụ: <code>*domain.example.com</code>, hoặc không thể thay thế một subdomain ở giữa tên miền, ví dụ: <code>subdomain.**.example.com</code>.</li>
</ul>
<h1 id="cloudfront-security"><strong>CloudFront Security</strong></h1>
<p><a href="CloudFront%2015a3fa6ae48380209873f76872cef294/CloudFront%20Security%2015f3fa6ae483809b8756da834e09d270.md"><strong>CloudFront Security</strong></a></p>
<h1 id="access-logs">Access Logs</h1>
<ul>
<li>CloudFront có thể được cấu hình để tạo các tệp log chứa thông tin chi tiết về mỗi yêu cầu người dùng mà CloudFront nhận được.</li>
<li>Các log truy cập có sẵn cho cả web và RTMP distributions.</li>
<li>Khi logging được bật, có thể chỉ định một S3 bucket nơi CloudFront sẽ lưu trữ các tệp log.</li>
<li>CloudFront sẽ cung cấp các log truy cập cho một distribution theo định kỳ, có thể lên đến vài lần mỗi giờ.</li>
<li>Thông thường, CloudFront sẽ cung cấp tệp log cho khoảng thời gian đó tới S3 bucket trong vòng một giờ kể từ khi các sự kiện xuất hiện trong log. Tuy nhiên, cần lưu ý rằng một số hoặc tất cả các mục log của một khoảng thời gian có thể bị trì hoãn lên đến 24 giờ.</li>
</ul>
<h1 id="cloudfront-cost">CloudFront Cost</h1>
<p>Phí CloudFront được tính dựa trên việc sử dụng thực tế của dịch vụ trong 4 yếu tố sau:</p>
<ul>
<li>Chi phí truyền dữ liệu ra ngoài Internet (Data Transfer Out to Internet)
<ul>
<li>Phí được áp dụng cho khối lượng dữ liệu chuyển ra từ các CloudFront edge locations, tính theo GB.</li>
<li>Việc truyền dữ liệu từ nguồn AWS (ví dụ: S3, EC2, v.v.) đến CloudFront không còn bị tính phí nữa. Điều này áp dụng cho việc truyền dữ liệu từ tất cả các vùng AWS đến tất cả các global CloudFront edge locations.</li>
</ul>
</li>
<li>HTTP/HTTPS Requests
<ul>
<li>Số lượng yêu cầu HTTP/HTTPS được thực hiện cho nội dung.</li>
</ul>
</li>
<li>Invalidation Requests
<ul>
<li>Tính phí theo từng đường dẫn trong invalidation request.</li>
<li>Một đường dẫn trong invalidation request đại diện cho URL (hoặc nhiều URL nếu đường dẫn chứa ký tự wildcard) của đối tượng mà bạn muốn invalidation request khỏi bộ nhớ đệm CloudFront.</li>
</ul>
</li>
<li>Dedicated IP Custom SSL certificates
<ul>
<li>$600 mỗi tháng cho mỗi custom SSL certificate liên kết với một hoặc nhiều CloudFront distributions sử dụng Dedicated IP version của custom SSL certificate, tính theo tỷ lệ theo giờ.</li>
</ul>
</li>
</ul> </article> <hr class="my-8 border-dashed"> <div class="opacity-80 sm:hidden"><span aria-hidden="true" class="max-sm:hidden">
|
</span><a class="space-x-1.5 hover:opacity-75" href="https://github.com/thuongnn/thuongnn.github.io/edit/master/src/data/blog/aws/networking/cloudfront.md" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span class="italic max-sm:text-sm sm:inline">Suggest Changes</span></a></div> <ul class="mt-4 mb-8 sm:my-8"> <li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/aws/" class="relative pr-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 text-sm" data-astro-transition-scope="astro-36ssibgs-2"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -mr-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>AWS</span> </a> </li><li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/amazon-web-services/" class="relative pr-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 text-sm" data-astro-transition-scope="astro-36ssibgs-3"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -mr-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>Amazon Web Services</span> </a> </li> </ul> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZQIRKt" component-url="/_astro/Comments.pnnUQGGQ.js" component-export="default" renderer-url="/_astro/client.BPIbHqJh.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> <div class="mt-4 flex flex-col items-center justify-between gap-6 sm:flex-row sm:items-end sm:gap-4"> <div class="flex flex-col flex-wrap items-center justify-center gap-1 sm:items-start"> <span class="italic">Share this post on:</span> <div class="text-center"> <a href="https://wa.me/?text=https://thuongnn.dev/posts/aws/networking/cloudfront/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via WhatsApp"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg> <span class="sr-only">Share this post via WhatsApp</span> </a><a href="https://www.facebook.com/sharer.php?u=https://thuongnn.dev/posts/aws/networking/cloudfront/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Facebook"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg> <span class="sr-only">Share this post on Facebook</span> </a><a href="https://x.com/intent/post?url=https://thuongnn.dev/posts/aws/networking/cloudfront/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on X"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg> <span class="sr-only">Share this post on X</span> </a><a href="https://t.me/share/url?url=https://thuongnn.dev/posts/aws/networking/cloudfront/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via Telegram"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg> <span class="sr-only">Share this post via Telegram</span> </a><a href="https://pinterest.com/pin/create/button/?url=https://thuongnn.dev/posts/aws/networking/cloudfront/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Pinterest"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 20l4 -9" /><path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /></svg> <span class="sr-only">Share this post on Pinterest</span> </a><a href="mailto:?subject=See%20this%20post&#38;body=https://thuongnn.dev/posts/aws/networking/cloudfront/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via email"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Share this post via email</span> </a> </div> </div> <button id="back-to-top" class="focus-outline py-1 whitespace-nowrap hover:opacity-75"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <span>Back to Top</span> </button> </div> <hr class="my-6 border-dashed"> <!-- Previous/Next Post Buttons --> <div data-pagefind-ignore class="grid grid-cols-1 gap-6 sm:grid-cols-2"> <a href="/posts/aws/networking/cloudfront-security" class="flex w-full gap-1 hover:opacity-75"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <div> <span>Previous Post</span> <div class="text-sm text-accent/85">[AWS] Amazon CloudFront Security</div> </div> </a> <a href="/posts/aws/networking/global-accelerator" class="flex w-full justify-end gap-1 text-right hover:opacity-75 sm:col-start-2"> <div> <span>Next Post</span> <div class="text-sm text-accent/85">[AWS] AWS Global Accelerator</div> </div> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 6l6 6l-6 6" /></svg> </a> </div> </main> <footer class="w-full mt-auto"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-border" aria-hidden="true"> </div> <div class="flex flex-col items-center justify-between py-6 sm:flex-row-reverse sm:py-4"> <div class="flex-wrap justify-center gap-1 flex"> <a href="https://github.com/thuongnn" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title=" thuongnn.dev on Github"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg> <span class="sr-only"> thuongnn.dev on Github</span> </a><a href="https://www.facebook.com/thuongnn97" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="thuongnn.dev on Facebook"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg> <span class="sr-only">thuongnn.dev on Facebook</span> </a><a href="https://www.linkedin.com/in/thuongnn/" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="thuongnn.dev on LinkedIn"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 11v5" /><path d="M8 8v.01" /><path d="M12 16v-5" /><path d="M16 16v-3a2 2 0 1 0 -4 0" /><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" /></svg> <span class="sr-only">thuongnn.dev on LinkedIn</span> </a><a href="mailto:thuongnn1997@gmail.com" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Send an email to thuongnn.dev"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Send an email to thuongnn.dev</span> </a> </div> <div class="my-2 flex flex-col items-center whitespace-nowrap sm:flex-row"> <span>Copyright &#169; 2025</span> <span class="hidden sm:inline">&nbsp;|&nbsp;</span> <span>All rights reserved.</span> </div> </div> </footer>  </body></html> <script data-astro-rerun>
  /** Create a progress indicator
   *  at the top */
  function createProgressBar() {
    // Create the main container div
    const progressContainer = document.createElement("div");
    progressContainer.className =
      "progress-container fixed top-0 z-10 h-1 w-full bg-background";

    // Create the progress bar div
    const progressBar = document.createElement("div");
    progressBar.className = "progress-bar h-1 w-0 bg-accent";
    progressBar.id = "myBar";

    // Append the progress bar to the progress container
    progressContainer.appendChild(progressBar);

    // Append the progress container to the document body or any other desired parent element
    document.body.appendChild(progressContainer);
  }
  createProgressBar();

  /** Update the progress bar
   *  when user scrolls */
  function updateScrollProgress() {
    document.addEventListener("scroll", () => {
      const winScroll =
        document.body.scrollTop || document.documentElement.scrollTop;
      const height =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      if (document) {
        const myBar = document.getElementById("myBar");
        if (myBar) {
          myBar.style.width = scrolled + "%";
        }
      }
    });
  }
  updateScrollProgress();

  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    const headings = Array.from(
      document.querySelectorAll("h2, h3, h4, h5, h6")
    );
    for (const heading of headings) {
      heading.classList.add("group");
      const link = document.createElement("a");
      link.className =
        "heading-link ml-2 opacity-0 group-hover:opacity-100 focus:opacity-100";
      link.href = "#" + heading.id;

      const span = document.createElement("span");
      span.ariaHidden = "true";
      span.innerText = "#";
      link.appendChild(span);
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    const copyButtonLabel = "Copy";
    const codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (const codeBlock of codeBlocks) {
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      const copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute right-3 -top-3 rounded bg-muted px-2 py-1 text-xs leading-4 text-foreground font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      const code = block.querySelector("code");
      const text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();

  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    document.querySelector("#back-to-top")?.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  }
  backToTop();

  /* Go to page start after page swap */
  document.addEventListener("astro:after-swap", () =>
    window.scrollTo({ left: 0, top: 0, behavior: "instant" })
  );
</script>