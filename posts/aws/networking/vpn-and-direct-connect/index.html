<!DOCTYPE html><html lang="en" class="scroll-smooth" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/"><meta name="generator" content="Astro v5.5.2"><!-- General Meta Tags --><title>[AWS] VPN and Direct Connect | thuongnn.dev</title><meta name="title" content="[AWS] VPN and Direct Connect | thuongnn.dev"><meta name="description" content="Tìm hiểu về các phương thức kết nối an toàn đến AWS, bao gồm VPN và Direct Connect."><meta name="author" content="thuongnn"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="[AWS] VPN and Direct Connect | thuongnn.dev"><meta property="og:description" content="Tìm hiểu về các phương thức kết nối an toàn đến AWS, bao gồm VPN và Direct Connect."><meta property="og:url" content="https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/"><meta property="og:image" content="https://thuongnn.dev/_astro/1.C88LKuY7.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2023-05-12T14:30:45.000Z"><meta property="article:modified_time" content="2025-05-29T02:30:41.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/"><meta property="twitter:title" content="[AWS] VPN and Direct Connect | thuongnn.dev"><meta property="twitter:description" content="Tìm hiểu về các phương thức kết nối an toàn đến AWS, bao gồm VPN và Direct Connect."><meta property="twitter:image" content="https://thuongnn.dev/_astro/1.C88LKuY7.png"><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"[AWS] VPN and Direct Connect | thuongnn.dev","image":"https://thuongnn.dev/_astro/1.C88LKuY7.png","datePublished":"2023-05-12T14:30:45.000Z","dateModified":"2025-05-29T02:30:41.000Z","author":[{"@type":"Person","name":"thuongnn","url":"https://thuongnn.dev/"}]}</script><!-- Enable RSS feed auto-discovery  --><!-- https://docs.astro.build/en/recipes/rss/#enabling-rss-feed-auto-discovery --><link rel="alternate" type="application/rss+xml" title="thuongnn.dev" href="https://thuongnn.dev/rss.xml"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CMTcOisY.js"></script><script src="/toggle-theme.js"></script><script src="https://www.googletagmanager.com/gtag/js?id=G-EQL1B4QF4J"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        // eslint-disable-next-line prefer-rest-params
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-EQL1B4QF4J");
    </script><link rel="stylesheet" href="/_astro/about.DCaVTJMw.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style><style>[data-astro-transition-scope="astro-fam6wyqg-1"] { view-transition-name: aws-vpn-and-direct-connect; }@layer astro { ::view-transition-old(aws-vpn-and-direct-connect) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(aws-vpn-and-direct-connect) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(aws-vpn-and-direct-connect) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(aws-vpn-and-direct-connect) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: aws; }@layer astro { ::view-transition-old(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(aws) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-3"] { view-transition-name: amazon-web-services; }@layer astro { ::view-transition-old(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(amazon-web-services) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-sckkx6r4>  <header> <a id="skip-to-content" href="#main-content" class="absolute -top-full left-16 z-50 bg-background px-3 py-2 text-accent backdrop-blur-lg transition-all focus:top-4">
Skip to content
</a> <div id="nav-container" class="mx-auto flex max-w-3xl flex-col items-center justify-between sm:flex-row"> <div id="top-nav-wrap" class="relative flex w-full items-baseline justify-between bg-background p-4 sm:items-center sm:py-6"> <a href="/" class="absolute py-1 text-2xl leading-7 font-semibold whitespace-nowrap sm:static"> thuongnn.dev </a> <nav id="nav-menu" class="flex w-full flex-col items-center sm:ml-2 sm:flex-row sm:justify-end sm:space-x-4 sm:py-0"> <button id="menu-btn" class="focus-outline self-end p-2 sm:hidden" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden" id="close-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-deep" id="menu-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 6h16" /><path d="M7 12h13" /><path d="M10 18h10" /></svg> </button> <ul id="menu-items" class="mt-4 grid w-44 grid-cols-2 place-content-center gap-2 [&#38;>li>a]:block [&#38;>li>a]:px-4 [&#38;>li>a]:py-3 [&#38;>li>a]:text-center [&#38;>li>a]:font-medium [&#38;>li>a]:hover:text-accent sm:[&#38;>li>a]:px-2 sm:[&#38;>li>a]:py-1 hidden sm:mt-0 sm:ml-0 sm:flex sm:w-auto sm:gap-x-5 sm:gap-y-0"> <li class="col-span-2"> <a href="/posts" class="active-nav">
Posts
</a> </li> <li class="col-span-2"> <div class="relative" id="tags-dropdown"> <a href="/tags" class="block px-4 py-3 text-center font-medium hover:text-accent sm:px-2 sm:py-1"> <span class="flex items-center justify-center gap-1">
Tags
<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path> </svg> </span> </a> <div class="absolute top-full left-0 z-50 mt-1 hidden w-48 rounded-md bg-white py-1 shadow-lg dark:bg-gray-800" id="tags-menu"> <ul class="pt-2 pb-1"> <li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/aws"> Amazon Web Services </a> </li><li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/google-cloud"> Google Cloud Platform </a> </li><li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/computer-science"> Computer Science </a> </li> </ul> </div> </div> </li> <li class="col-span-2"> <a href="/about">
About
</a> </li> <li class="col-span-2"> <a href="/archives" class="group inline-block hover:text-accent focus-outline flex justify-center p-3 sm:p-1" aria-label="archives" title="Archives"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:inline-block"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" /><path d="M10 12l4 0" /></svg> <span class="sm:sr-only">Archives</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <a href="/search" class="group inline-block hover:text-accent focus-outline flex p-3 sm:p-1" aria-label="search" title="Search"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg> <span class="sr-only">Search</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <button id="theme-btn" class="focus-outline relative size-12 p-4 sm:size-8 hover:[&>svg]:stroke-accent" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg> </button> </li> </ul> </nav> </div> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-border" aria-hidden="true"> </div> </header> <script type="module">function d(){const e=document.querySelector("#menu-btn"),t=document.querySelector("#menu-items"),n=document.querySelector("#menu-icon"),o=document.querySelector("#close-icon");!e||!t||!n||!o||e.addEventListener("click",()=>{const s=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",s?"false":"true"),e.setAttribute("aria-label",s?"Open Menu":"Close Menu"),t.classList.toggle("hidden"),n.classList.toggle("hidden"),o.classList.toggle("hidden")})}function u(){const e=document.getElementById("tags-dropdown"),t=document.getElementById("tags-menu");let n;!e||!t||(e.addEventListener("mouseenter",()=>{clearTimeout(n),t.classList.remove("hidden")}),e.addEventListener("mouseleave",()=>{n=setTimeout(()=>{t.classList.add("hidden")},100)}))}d();u();document.addEventListener("astro:after-swap",()=>{d(),u()});</script> <div class="mx-auto flex w-full max-w-3xl items-center justify-start px-2"><a id="back-button" href="/" class="group inline-block hover:text-accent focus-outline mt-8 mb-2 flex hover:text-foreground/75"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg><span>Go back</span></a></div><script type="module">function o(){const t=document.querySelector("#back-button"),e=sessionStorage.getItem("backUrl");e&&t&&(t.href=e)}document.addEventListener("astro:page-load",o);o();</script> <main id="main-content" class="mx-auto w-full max-w-3xl px-4 pb-12" data-pagefind-body> <h1 class="inline-block text-2xl font-bold text-accent sm:text-3xl" data-astro-transition-scope="astro-fam6wyqg-1"> [AWS] VPN and Direct Connect </h1> <div class="flex items-center gap-4"> <div class="flex items-end space-x-2 opacity-80 my-2"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 min-w-[1.375rem]"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M7 14h.013" /><path d="M10.01 14h.005" /><path d="M13.01 14h.005" /><path d="M16.015 14h.005" /><path d="M13.015 17h.005" /><path d="M7.01 17h.005" /><path d="M10.01 17h.005" /></svg> <span class="text-sm italic sm:text-base">
Updated:
</span> <span class="text-sm italic sm:text-base"> <time datetime="2025-05-29T02:30:41.000Z">29 May, 2025</time> <span aria-hidden="true"> | </span> <span class="sr-only">&nbsp;at&nbsp;</span> <span class="text-nowrap">02:30 AM</span> </span> </div> <div class="opacity-80 max-sm:hidden"><span aria-hidden="true" class="max-sm:hidden">
|
</span><a class="space-x-1.5 hover:opacity-75" href="https://github.com/thuongnn/thuongnn.github.io/edit/master/src/data/blog/aws/networking/vpn-and-direct-connect.md" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span class="italic max-sm:text-sm sm:inline">Suggest Changes</span></a></div> </div> <article id="article" class="mx-auto prose mt-8 max-w-3xl"> <p>Bài viết được tham khảo và tổng hợp lại từ Jayendra’s Blog, xem bài viết gốc ở đây: <a href="https://jayendrapatil.com/aws-vpn-and-direct-connect">https://jayendrapatil.com/aws-vpn-and-direct-connect</a>.</p>
<h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#gi%E1%BB%9Bi-thi%E1%BB%87u">Giới thiệu</a></li>
<li><a href="#vpn-components"><strong>VPN Components</strong></a></li>
<li><a href="#vpn-routing-options">VPN Routing Options</a></li>
<li><a href="#vpn-route-priority">VPN Route Priority</a></li>
<li><a href="#vpn-limitations">VPN Limitations</a></li>
<li><a href="#vpn-monitoring">VPN Monitoring</a></li>
<li><a href="#vpn-connection-redundancy">VPN Connection Redundancy</a></li>
<li><a href="#multiple-site-to-site-vpn-connections">Multiple Site-to-Site VPN Connections</a></li>
<li><a href="#vpn-cloudhub">VPN CloudHub</a></li>
<li><a href="#vpn-vs-direct-connect"><strong>VPN vs Direct Connect</strong></a></li>
</ul>
<p></p></details><p></p>
<h1 id="giới-thiệu">Giới thiệu</h1>
<ul>
<li>Các kết nối <strong>VPN AWS</strong> được sử dụng để <strong>mở rộng các on-premises data centers tới AWS</strong>. Kết nối VPN cung cấp các kết nối IPSec an toàn giữa data center hoặc branch office và các tài nguyên AWS.</li>
<li>AWS Site-to-Site VPN, AWS Hardware VPN hoặc AWS Managed VPN
<ul>
<li>Kết nối có thể được thiết lập bằng cách tạo kết nối VPN IPSec, hardware VPN connection giữa VPC và remote network.</li>
<li>Ở phía AWS của kết nối VPN, một <strong>Virtual Private Gateway (VGW)</strong> cung cấp hai VPN endpoints cho việc chuyển đổi tự động khi gặp sự cố.</li>
<li>Ở phía khách hàng, một <strong>customer gateway (CGW)</strong> cần được cấu hình, đây là thiết bị vật lý hoặc ứng dụng phần mềm ở phía mạng từ xa của kết nối VPN.</li>
</ul>
</li>
<li><strong>AWS Client VPN</strong>
<ul>
<li>AWS Client VPN là dịch vụ VPN quản lý dựa trên khách hàng, cho phép truy cập an toàn vào các tài nguyên AWS và tài nguyên ở on-premises network.</li>
</ul>
</li>
<li><strong>AWS VPN CloudHub:</strong>
<ul>
<li>Đối với nhiều hơn một remote network, ví dụ như nhiều văn phòng chi nhánh, có thể tạo nhiều AWS hardware VPN connections qua VPC để enable giao tiếp giữa các mạng này.</li>
</ul>
</li>
<li><strong>AWS Software VPN:</strong>
<ul>
<li>Một kết nối VPN có thể được tạo đến remote network bằng cách sử dụng một EC2 instance trong VPC chạy phần mềm VPN của bên thứ ba.</li>
<li>AWS không cung cấp hoặc duy trì các thiết bị phần mềm VPN của bên thứ ba. Tuy nhiên, có nhiều sản phẩm được cung cấp bởi các đối tác và cộng đồng mã nguồn mở.</li>
</ul>
</li>
<li><strong>AWS Direct Connect</strong> cung cấp một dedicated private connection từ remote network tới VPC. Direct Connect có thể được kết hợp với một AWS hardware VPN connection để tạo ra một kết nối mã hóa IPSec.</li>
</ul>
<h1 id="vpn-components"><strong>VPN Components</strong></h1>
<p><img alt="1.png" sizes="(min-width: 551px) 551px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 551; --h: 162;" data-astro-image="responsive" width="551" height="162" src="/_astro/1.C88LKuY7_Z17UrMR.webp" srcset="/_astro/1.C88LKuY7_Z17UrMR.webp 551w"></p>
<ul>
<li><strong>Virtual Private Gateway – VGW</strong>
<ul>
<li>Virtual Private Gateway (VGW) là thiết bị tập trung VPN ở phía AWS của kết nối VPN.</li>
</ul>
</li>
<li><strong>Customer Gateway – CGW</strong>
<ul>
<li>Customer Gateway (CGW) là thiết bị vật lý hoặc ứng dụng phần mềm ở phía khách hàng của kết nối VPN.</li>
<li>Khi một kết nối <strong>VPN tunnel</strong> được tạo ra, VPN sẽ được kích hoạt khi có lưu lượng truy cập từ phía remote network của kết nối VPN.</li>
<li>Mặc định, VGW không phải là initiator; CGW phải kích hoạt các tunnels cho kết nối <strong>Site-to-Site VPN</strong> bằng cách tạo traffic và khởi xướng quá trình đàm phán <strong>Internet Key Exchange (IKE)</strong>.</li>
<li>Nếu kết nối VPN trải qua một khoảng thời gian không có hoạt động, thường là 10 giây (tùy theo cấu hình), tunnel có thể bị ngừng hoạt động. Để ngăn chặn điều này, có thể sử dụng network monitoring tool để tạo các gói keepalive, <em>ví dụ như sử dụng IP SLA</em>.</li>
</ul>
</li>
<li><strong>Transit Gateway</strong>
<ul>
<li>Transit Gateway là một transit hub có thể được sử dụng để kết nối các VPC và on-premises networks.</li>
<li>Kết nối <strong>VPN Site-to-Site</strong> trên Transit Gateway có thể hỗ trợ traffic IPv4 hoặc IPv6 bên trong các VPN tunnels.</li>
</ul>
</li>
<li>Kết nối VPN Site-to-Site cung cấp <strong>02</strong> <strong>VPN tunnel</strong> giữa VGW hoặc Transit Gateway ở phía AWS và CGW ở phía on-premises.</li>
</ul>
<h1 id="vpn-routing-options">VPN Routing Options</h1>
<ul>
<li>Đối với một kết nối VPN, bảng định tuyến (route table) của các subnet cần được cập nhật với loại định tuyến (static hoặc dynamic) mà bạn dự định sử dụng.</li>
<li>Bảng định tuyến xác định nơi traffic mạng sẽ được chuyển hướng. Traffic dành cho các kết nối VPN phải được định tuyến đến virtual private gateway.</li>
<li>Loại định tuyến có thể phụ thuộc vào cấu hình và kiểu máy của thiết bị CGW
<ul>
<li><strong>Static Routing</strong>
<ul>
<li>Nếu thiết bị của bạn không hỗ trợ BGP, hãy chỉ định định tuyến tĩnh.</li>
<li>Sử dụng static routing, các routes (IP prefixes) có thể được chỉ định và định tuyến tới virtual private gateway.</li>
<li>Các thiết bị không hỗ trợ BGP cũng có thể thực hiện kiểm tra tình trạng thiết bị để hỗ trợ chuyển tiếp (failover) sang tunnel thứ hai khi cần.</li>
</ul>
</li>
<li><strong>BGP Dynamic Routing</strong>
<ul>
<li>Nếu thiết bị VPN hỗ trợ Border Gateway Protocol (BGP), hãy chỉ định dynamic routing cho kết nối VPN.</li>
<li>Khi sử dụng BGP device, không cần chỉ định các static routes cho kết nối VPN vì thiết bị sử dụng BGP để tự động phát hiện và quảng bá các routes của nó tới virtual private gateway.</li>
<li>Các thiết bị hỗ trợ BGP được khuyến khích vì giao thức BGP cung cấp các kiểm tra liveness mạnh mẽ có thể hỗ trợ chuyển tiếp (failover) sang VPB tunnel thứ hai nếu tunnel đầu tiên bị ngừng hoạt động.</li>
</ul>
</li>
</ul>
</li>
<li>Chỉ các IP prefixes đã được virtual private gateway biết đến, thông qua việc quảng bá BGP hoặc static route entry, mới có thể nhận traffic từ VPC.</li>
<li>Virtual private gateway không định tuyến bất kỳ traffic nào khác ngoài các quảng bá BGP, static route entry hoặc CIDR của attached VPC.</li>
</ul>
<h1 id="vpn-route-priority">VPN Route Priority</h1>
<ul>
<li>Áp dụng quy tắc <em>Longest prefix match</em>.</li>
<li>Nếu các prefixes giống nhau, VGW sẽ ưu tiên các routes theo thứ tự sau, từ ưu tiên cao nhất đến thấp nhất:
<ul>
<li>Các routes được quảng bá BGP từ kết nối AWS Direct Connect.</li>
<li>Các static routes được thêm thủ công cho kết nối VPN Site-to-Site.</li>
<li>Các routes được quảng bá BGP từ kết nối VPN Site-to-Site.</li>
<li>Prefix có AS PATH ngắn nhất sẽ được ưu tiên khi các prefixes giống nhau và mỗi kết nối VPN Site-to-Site sử dụng BGP.</li>
<li>Đường dẫn có giá trị multi-exit discriminator (MED) thấp nhất sẽ được ưu tiên khi AS PATH có độ dài bằng nhau và nếu AS đầu tiên trong AS_SEQUENCE là giống nhau trên các đường dẫn khác nhau.</li>
</ul>
</li>
</ul>
<h1 id="vpn-limitations">VPN Limitations</h1>
<ul>
<li>Chỉ hỗ trợ IPSec tunnel mode. Transport mode hiện tại không được hỗ trợ.</li>
<li>Chỉ hỗ trợ một VGW có thể được gắn vào một VPC tại một thời điểm.</li>
<li>Không hỗ trợ lưu lượng IPv6 trên virtual private gateway.</li>
<li>Không hỗ trợ Path MTU Discovery.</li>
<li>Không hỗ trợ các CIDR block chồng lấn cho các mạng. Khuyến nghị sử dụng các CIDR block không chồng lấn.</li>
<li>Không hỗ trợ transitive routing. Vì vậy, đối với traffic từ on-premises tới AWS thông qua virtual private gateway:
<ul>
<li><strong>Không hỗ trợ</strong> kết nối Internet qua Internet Gateway</li>
<li><strong>Không hỗ trợ</strong> kết nối Internet qua <a href="https://www.notion.so/1593fa6ae483806fb810c213765ec338?pvs=21">NAT Gateway</a></li>
<li><strong>Không hỗ trợ</strong> truy cập tài nguyên VPC qua <a href="Virtual%20Private%20Network%20%E2%80%93%20VPC%201593fa6ae483806eaa13c20dcc38aafb/VPC%20Peering%2015a3fa6ae483803784d6ebf9712b44bf.md">VPC Peering</a></li>
<li><strong>Không hỗ trợ</strong> truy cập S3, DynamoDB qua <a href="https://www.notion.so/15a3fa6ae48380a2a1d8f3e987f1a989?pvs=21">VPC Gateway Endpoint</a></li>
<li>Tuy nhiên, kết nối Internet qua NAT instance và VPC Interface Endpoint hoặc dịch vụ PrivateLink là có thể truy cập.</li>
</ul>
</li>
<li>Hiện tại AWS cung cấp băng thông tới 1.25Gbps.</li>
</ul>
<h1 id="vpn-monitoring">VPN Monitoring</h1>
<ul>
<li>AWS Site-to-Site VPN tự động gửi thông báo đến AWS Health Dashboard.</li>
<li>AWS Site-to-Site VPN được tích hợp với CloudWatch với các metrics sau:
<ul>
<li><strong>TunnelState</strong>: Trạng thái của các tunnels.
<ul>
<li>Đối với các static VPNs, giá trị 0 chỉ ra DOWN và 1 chỉ ra UP.</li>
<li>Đối với VPN BGP, giá trị 1 chỉ ra ESTABLISHED và 0 được sử dụng cho tất cả các trạng thái khác.</li>
<li>Đối với cả hai loại VPN, các giá trị từ 0 đến 1 chỉ ra ít nhất một tunnel không UP.</li>
</ul>
</li>
<li><strong>TunnelDataIn</strong>: byte nhận ở phía AWS của kết nối qua VPN tunnel từ customer gateway.</li>
<li><strong>TunnelDataOut</strong>: byte gửi từ phía AWS của kết nối qua VPN tunnel đến customer gateway</li>
</ul>
</li>
</ul>
<h1 id="vpn-connection-redundancy">VPN Connection Redundancy</h1>
<p><img alt="2.png" sizes="(min-width: 980px) 980px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 980; --h: 1024;" data-astro-image="responsive" width="980" height="1024" src="/_astro/2.DKncXiJU_2wLtii.webp" srcset="/_astro/2.DKncXiJU_EGcvI.webp 640w, /_astro/2.DKncXiJU_Z1lfpWx.webp 750w, /_astro/2.DKncXiJU_Z2nTTCM.webp 828w, /_astro/2.DKncXiJU_2wLtii.webp 980w"></p>
<ul>
<li><strong>Kết nối VPN</strong> được sử dụng để kết nối mạng của khách hàng với VPC.</li>
<li>Mỗi kết nối VPN có hai <em>tunnel</em> để đảm bảo kết nối trong trường hợp một trong các kết nối VPN không khả dụng, với mỗi <em>tunnel</em> sử dụng một địa chỉ <em>Public IP</em> của <em>virtual private gateway</em> (VGW) duy nhất.</li>
<li>Cả hai <em>tunnel</em> nên được cấu hình để đảm bảo tính <em>redundant</em>.</li>
<li>Khi một <em>tunnel</em> không khả dụng, ví dụ khi đang bảo trì, <em>traffic</em> sẽ tự động được chuyển hướng đến <em>tunnel</em> còn lại của kết nối VPN cụ thể đó.</li>
<li>Để bảo vệ khỏi mất kết nối trong trường hợp <em>customer gateway</em> không khả dụng, có thể thiết lập một kết nối VPN thứ hai đến VPC và VGW thông qua một <em>customer gateway</em> thứ hai.</li>
<li>Bằng cách sử dụng các redundant VPN connections và CGWs, việc bảo trì trên một trong các <em>customer gateway</em> có thể được thực hiện trong khi <em>traffic</em> tiếp tục chảy qua kết nối VPN của <em>customer gateway</em> thứ hai.</li>
<li><strong>Kết nối VPN định tuyến động</strong> sử dụng Giao thức Border Gateway (BGP) được khuyến nghị nếu có sẵn, để trao đổi thông tin định tuyến giữa các <em>customer gateway</em> và <em>virtual private gateway.</em></li>
<li><strong>Kết nối VPN định tuyến tĩnh</strong> yêu cầu phải nhập các tuyến tĩnh cho mạng vào phía <em>customer gateway.</em></li>
<li>Thông tin định tuyến được quảng bá qua BGP và các tuyến được nhập tĩnh cho phép các gateway ở cả hai phía xác định các <em>tunnel</em> nào có sẵn và chuyển hướng <em>traffic</em> nếu có sự cố xảy ra.</li>
</ul>
<h1 id="multiple-site-to-site-vpn-connections">Multiple Site-to-Site VPN Connections</h1>
<p><img alt="3.png" sizes="(min-width: 1024px) 1024px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 1024; --h: 704;" data-astro-image="responsive" width="1024" height="704" src="/_astro/3.cWJB8F2e_2prD61.webp" srcset="/_astro/3.cWJB8F2e_Z1O8d0m.webp 640w, /_astro/3.cWJB8F2e_lcBuA.webp 750w, /_astro/3.cWJB8F2e_Z1MYFsU.webp 828w, /_astro/3.cWJB8F2e_2prD61.webp 1024w"></p>
<ul>
<li>VPC có một attached <em>virtual private gateway</em> và remote network bao gồm một <em>customer gateway</em>, cần được cấu hình để kích hoạt kết nối VPN.</li>
<li>Cần thiết lập định tuyến để mọi <em>traffic</em> từ VPC hướng đến remote network được định tuyến tới <em>virtual private gateway</em>.</li>
<li>Mỗi kết nối VPN có hai <em>tunnel</em> liên kết với nó, có thể được cấu hình trên bộ định tuyến của customer, vì vậy không có <em>single point of failure</em>.</li>
<li>Có thể tạo nhiều kết nối VPN tới một VPC duy nhất, và có thể cấu hình một <em>customer gateway</em> thứ hai để tạo redundant connection tới cùng một địa điểm bên ngoài hoặc để tạo các kết nối VPN tới nhiều vị trí địa lý khác nhau.</li>
</ul>
<h1 id="vpn-cloudhub">VPN CloudHub</h1>
<ul>
<li><em>VPN CloudHub</em> có thể được sử dụng để cung cấp kết nối an toàn giữa nhiều on-premises sites nếu bạn có nhiều kết nối VPN.</li>
<li><em>VPN CloudHub</em> hoạt động theo mô hình <strong>hub-and-spoke</strong> đơn giản, sử dụng <em>Virtual Private Gateway</em> ở detached mode có thể sử dụng mà không cần VPC.</li>
<li>Thiết kế này phù hợp với khách hàng có nhiều văn phòng chi nhánh và kết nối Internet hiện có, những người muốn triển khai một mô hình hub-and-spoke thuận tiện, có thể là chi phí thấp cho kết nối chính hoặc dự phòng giữa các văn phòng từ xa này.</li>
</ul>
<p><img alt="4.png" sizes="(min-width: 1024px) 1024px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 1024; --h: 760;" data-astro-image="responsive" width="1024" height="760" src="/_astro/4.BXaCxwFy_Z2gQfjk.webp" srcset="/_astro/4.BXaCxwFy_246E5d.webp 640w, /_astro/4.BXaCxwFy_Z1jdQxn.webp 750w, /_astro/4.BXaCxwFy_gzmlg.webp 828w, /_astro/4.BXaCxwFy_Z2gQfjk.webp 1024w"></p>
<ul>
<li>Kiến trúc <em>VPN CloudHub</em> với các đường chấm màu xanh chỉ ra việc định tuyến <em>traffic</em> giữa các remote sites qua các kết nối VPN của chúng.</li>
<li><em>AWS VPN CloudHub</em> yêu cầu một <em>virtual private gateway</em> với nhiều <em>customer gateway.</em> Mỗi <em>customer gateway</em> phải sử dụng một <em>Border Gateway Protocol (BGP)</em> Autonomous System Number (ASN) duy nhất.</li>
<li>Các <em>customer gateway</em> quảng bá các routes thích hợp (BGP prefixes) qua các kết nối VPN của chúng. Các quảng bá routes được nhận và tái quảng bá tới mỗi <em>BGP peer</em>, cho phép mỗi site gửi và nhận dữ liệu từ các site khác. Các routes cho mỗi <em>spoke</em> phải có ASN duy nhất và các site không được có các dải IP chồng lấn.</li>
<li>Mỗi site cũng có thể gửi và nhận dữ liệu từ VPC như thể chúng đang sử dụng một kết nối VPN tiêu chuẩn.</li>
<li>Các site sử dụng kết nối <em>AWS Direct Connect</em> tới <em>virtual private gateway</em> cũng có thể là một phần của <em>AWS VPN CloudHub.</em></li>
<li><strong>Cấu hình AWS VPN CloudHub</strong>
<ul>
<li>Có thể tạo nhiều <em>customer gateway</em>, mỗi cái với địa chỉ <em>public IP</em> duy nhất của gateway và ASN.</li>
<li>Một kết nối VPN có thể được tạo từ mỗi <em>customer gateway</em> tới một <em>virtual private gateway</em> chung.</li>
<li>Mỗi kết nối VPN phải quảng bá các BGP routes cụ thể của mình. Điều này được thực hiện thông qua các câu lệnh mạng trong các tệp cấu hình VPN cho kết nối VPN.</li>
</ul>
</li>
</ul>
<h1 id="vpn-vs-direct-connect"><a href="https://jayendrapatil.com/aws-direct-connect-vs-vpn/"><strong>VPN vs Direct Connect</strong></a></h1>
<p><img alt="5.png" sizes="(min-width: 768px) 768px, 100vw" loading="lazy" decoding="async" fetchpriority="auto" style="--w: 768; --h: 504;" data-astro-image="responsive" width="768" height="504" src="/_astro/5.Bd-JbDTs_arQJr.webp" srcset="/_astro/5.Bd-JbDTs_ZNOdte.webp 640w, /_astro/5.Bd-JbDTs_St4W1.webp 750w, /_astro/5.Bd-JbDTs_arQJr.webp 768w"></p> </article> <hr class="my-8 border-dashed"> <div class="opacity-80 sm:hidden"><span aria-hidden="true" class="max-sm:hidden">
|
</span><a class="space-x-1.5 hover:opacity-75" href="https://github.com/thuongnn/thuongnn.github.io/edit/master/src/data/blog/aws/networking/vpn-and-direct-connect.md" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span class="italic max-sm:text-sm sm:inline">Suggest Changes</span></a></div> <ul class="mt-4 mb-8 sm:my-8"> <li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/aws/" class="relative pr-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 text-sm" data-astro-transition-scope="astro-36ssibgs-2"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -mr-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>AWS</span> </a> </li><li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/amazon-web-services/" class="relative pr-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 text-sm" data-astro-transition-scope="astro-36ssibgs-3"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -mr-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>Amazon Web Services</span> </a> </li> </ul> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZQIRKt" component-url="/_astro/Comments.pnnUQGGQ.js" component-export="default" renderer-url="/_astro/client.BPIbHqJh.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> <div class="mt-4 flex flex-col items-center justify-between gap-6 sm:flex-row sm:items-end sm:gap-4"> <div class="flex flex-col flex-wrap items-center justify-center gap-1 sm:items-start"> <span class="italic">Share this post on:</span> <div class="text-center"> <a href="https://wa.me/?text=https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via WhatsApp"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg> <span class="sr-only">Share this post via WhatsApp</span> </a><a href="https://www.facebook.com/sharer.php?u=https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Facebook"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg> <span class="sr-only">Share this post on Facebook</span> </a><a href="https://x.com/intent/post?url=https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on X"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg> <span class="sr-only">Share this post on X</span> </a><a href="https://t.me/share/url?url=https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via Telegram"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg> <span class="sr-only">Share this post via Telegram</span> </a><a href="https://pinterest.com/pin/create/button/?url=https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Pinterest"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 20l4 -9" /><path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /></svg> <span class="sr-only">Share this post on Pinterest</span> </a><a href="mailto:?subject=See%20this%20post&#38;body=https://thuongnn.dev/posts/aws/networking/vpn-and-direct-connect/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via email"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Share this post via email</span> </a> </div> </div> <button id="back-to-top" class="focus-outline py-1 whitespace-nowrap hover:opacity-75"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <span>Back to Top</span> </button> </div> <hr class="my-6 border-dashed"> <!-- Previous/Next Post Buttons --> <div data-pagefind-ignore class="grid grid-cols-1 gap-6 sm:grid-cols-2"> <a href="/posts/aws/networking/vpc-privatelink" class="flex w-full gap-1 hover:opacity-75"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <div> <span>Previous Post</span> <div class="text-sm text-accent/85">[AWS] VPC PrivateLink</div> </div> </a> <a href="/posts/aws/other/aws-config" class="flex w-full justify-end gap-1 text-right hover:opacity-75 sm:col-start-2"> <div> <span>Next Post</span> <div class="text-sm text-accent/85">[AWS] AWS Config</div> </div> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 6l6 6l-6 6" /></svg> </a> </div> </main> <footer class="w-full mt-auto"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-border" aria-hidden="true"> </div> <div class="flex flex-col items-center justify-between py-6 sm:flex-row-reverse sm:py-4"> <div class="flex-wrap justify-center gap-1 flex"> <a href="https://github.com/thuongnn" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title=" thuongnn.dev on Github"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg> <span class="sr-only"> thuongnn.dev on Github</span> </a><a href="https://www.facebook.com/thuongnn97" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="thuongnn.dev on Facebook"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg> <span class="sr-only">thuongnn.dev on Facebook</span> </a><a href="https://www.linkedin.com/in/thuongnn/" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="thuongnn.dev on LinkedIn"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 11v5" /><path d="M8 8v.01" /><path d="M12 16v-5" /><path d="M16 16v-3a2 2 0 1 0 -4 0" /><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" /></svg> <span class="sr-only">thuongnn.dev on LinkedIn</span> </a><a href="mailto:thuongnn1997@gmail.com" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Send an email to thuongnn.dev"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Send an email to thuongnn.dev</span> </a> </div> <div class="my-2 flex flex-col items-center whitespace-nowrap sm:flex-row"> <span>Copyright &#169; 2025</span> <span class="hidden sm:inline">&nbsp;|&nbsp;</span> <span>All rights reserved.</span> </div> </div> </footer>  </body></html> <script data-astro-rerun>
  /** Create a progress indicator
   *  at the top */
  function createProgressBar() {
    // Create the main container div
    const progressContainer = document.createElement("div");
    progressContainer.className =
      "progress-container fixed top-0 z-10 h-1 w-full bg-background";

    // Create the progress bar div
    const progressBar = document.createElement("div");
    progressBar.className = "progress-bar h-1 w-0 bg-accent";
    progressBar.id = "myBar";

    // Append the progress bar to the progress container
    progressContainer.appendChild(progressBar);

    // Append the progress container to the document body or any other desired parent element
    document.body.appendChild(progressContainer);
  }
  createProgressBar();

  /** Update the progress bar
   *  when user scrolls */
  function updateScrollProgress() {
    document.addEventListener("scroll", () => {
      const winScroll =
        document.body.scrollTop || document.documentElement.scrollTop;
      const height =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      if (document) {
        const myBar = document.getElementById("myBar");
        if (myBar) {
          myBar.style.width = scrolled + "%";
        }
      }
    });
  }
  updateScrollProgress();

  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    const headings = Array.from(
      document.querySelectorAll("h2, h3, h4, h5, h6")
    );
    for (const heading of headings) {
      heading.classList.add("group");
      const link = document.createElement("a");
      link.className =
        "heading-link ml-2 opacity-0 group-hover:opacity-100 focus:opacity-100";
      link.href = "#" + heading.id;

      const span = document.createElement("span");
      span.ariaHidden = "true";
      span.innerText = "#";
      link.appendChild(span);
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    const copyButtonLabel = "Copy";
    const codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (const codeBlock of codeBlocks) {
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      const copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute right-3 -top-3 rounded bg-muted px-2 py-1 text-xs leading-4 text-foreground font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      const code = block.querySelector("code");
      const text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();

  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    document.querySelector("#back-to-top")?.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  }
  backToTop();

  /* Go to page start after page swap */
  document.addEventListener("astro:after-swap", () =>
    window.scrollTo({ left: 0, top: 0, behavior: "instant" })
  );
</script>