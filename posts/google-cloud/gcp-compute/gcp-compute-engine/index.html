<!DOCTYPE html><html lang="en" class="scroll-smooth" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/"><meta name="generator" content="Astro v5.5.2"><!-- General Meta Tags --><title>[Google Cloud] GCP Compute Engine | thuongnn.dev</title><meta name="title" content="[Google Cloud] GCP Compute Engine | thuongnn.dev"><meta name="description" content="Tìm hiểu về Compute Engine trong Google Cloud."><meta name="author" content="thuongnn"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="[Google Cloud] GCP Compute Engine | thuongnn.dev"><meta property="og:description" content="Tìm hiểu về Compute Engine trong Google Cloud."><meta property="og:url" content="https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/"><meta property="og:image" content="https://github.com/user-attachments/assets/633b8074-63b6-4272-8896-1bfb4c063639"><!-- Article Published/Modified time --><meta property="article:published_time" content="2022-09-14T22:36:35.000Z"><meta property="article:modified_time" content="2022-09-14T22:36:35.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/"><meta property="twitter:title" content="[Google Cloud] GCP Compute Engine | thuongnn.dev"><meta property="twitter:description" content="Tìm hiểu về Compute Engine trong Google Cloud."><meta property="twitter:image" content="https://github.com/user-attachments/assets/633b8074-63b6-4272-8896-1bfb4c063639"><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Google Cloud] GCP Compute Engine | thuongnn.dev","image":"https://github.com/user-attachments/assets/633b8074-63b6-4272-8896-1bfb4c063639","datePublished":"2022-09-14T22:36:35.000Z","dateModified":"2022-09-14T22:36:35.000Z","author":[{"@type":"Person","name":"thuongnn","url":"https://thuongnn.dev/"}]}</script><!-- Enable RSS feed auto-discovery  --><!-- https://docs.astro.build/en/recipes/rss/#enabling-rss-feed-auto-discovery --><link rel="alternate" type="application/rss+xml" title="thuongnn.dev" href="https://thuongnn.dev/rss.xml"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CMTcOisY.js"></script><script src="/toggle-theme.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EQL1B4QF4J"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(args) {
        dataLayer.push(args);
      }
      gtag("js", new Date());
      gtag("config", "G-EQL1B4QF4J");
    </script><link rel="stylesheet" href="/_astro/about.Cy8qGgxC.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style><style>[data-astro-transition-scope="astro-fam6wyqg-1"] { view-transition-name: google-cloud-gcp-compute-engine; }@layer astro { ::view-transition-old(google-cloud-gcp-compute-engine) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(google-cloud-gcp-compute-engine) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(google-cloud-gcp-compute-engine) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(google-cloud-gcp-compute-engine) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-fam6wyqg-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-fam6wyqg-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: google-cloud; }@layer astro { ::view-transition-old(google-cloud) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(google-cloud) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(google-cloud) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(google-cloud) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-sckkx6r4>  <header> <a id="skip-to-content" href="#main-content" class="absolute -top-full left-16 z-50 bg-background px-3 py-2 text-accent backdrop-blur-lg transition-all focus:top-4">
Skip to content
</a> <div id="nav-container" class="mx-auto flex max-w-3xl flex-col items-center justify-between sm:flex-row"> <div id="top-nav-wrap" class="relative flex w-full items-baseline justify-between bg-background p-4 sm:items-center sm:py-6"> <a href="/" class="absolute py-1 text-2xl leading-7 font-semibold whitespace-nowrap sm:static"> thuongnn.dev </a> <nav id="nav-menu" class="flex w-full flex-col items-center sm:ml-2 sm:flex-row sm:justify-end sm:space-x-4 sm:py-0"> <button id="menu-btn" class="focus-outline self-end p-2 sm:hidden" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden" id="close-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-deep" id="menu-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 6h16" /><path d="M7 12h13" /><path d="M10 18h10" /></svg> </button> <ul id="menu-items" class="mt-4 grid w-44 grid-cols-2 place-content-center gap-2 [&#38;>li>a]:block [&#38;>li>a]:px-4 [&#38;>li>a]:py-3 [&#38;>li>a]:text-center [&#38;>li>a]:font-medium [&#38;>li>a]:hover:text-accent sm:[&#38;>li>a]:px-2 sm:[&#38;>li>a]:py-1 hidden sm:mt-0 sm:ml-0 sm:flex sm:w-auto sm:gap-x-5 sm:gap-y-0"> <li class="col-span-2"> <a href="/posts" class="active-nav">
Posts
</a> </li> <li class="col-span-2"> <div class="relative" id="tags-dropdown"> <a href="/tags" class="block px-4 py-3 text-center font-medium hover:text-accent sm:px-2 sm:py-1"> <span class="flex items-center justify-center gap-1">
Tags
<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path> </svg> </span> </a> <div class="absolute top-full left-0 z-50 mt-1 hidden w-48 rounded-md bg-white py-1 shadow-lg dark:bg-gray-800" id="tags-menu"> <ul class="pt-2 pb-1"> <li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/aws"> Amazon Web Services </a> </li><li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/google-cloud"> Google Cloud Platform </a> </li><li> <a class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800" href="/tags/collections/computer-science"> Computer Science </a> </li> </ul> </div> </div> </li> <li class="col-span-2"> <a href="/about">
About
</a> </li> <li class="col-span-2"> <a href="/archives" class="group inline-block hover:text-accent focus-outline flex justify-center p-3 sm:p-1" aria-label="archives" title="Archives"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:inline-block"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" /><path d="M10 12l4 0" /></svg> <span class="sm:sr-only">Archives</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <a href="/search" class="group inline-block hover:text-accent focus-outline flex p-3 sm:p-1" aria-label="search" title="Search"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg> <span class="sr-only">Search</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <button id="theme-btn" class="focus-outline relative size-12 p-4 sm:size-8 hover:[&>svg]:stroke-accent" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg> </button> </li> </ul> </nav> </div> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-border" aria-hidden="true"> </div> </header> <script type="module">function d(){const e=document.querySelector("#menu-btn"),t=document.querySelector("#menu-items"),n=document.querySelector("#menu-icon"),o=document.querySelector("#close-icon");!e||!t||!n||!o||e.addEventListener("click",()=>{const s=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",s?"false":"true"),e.setAttribute("aria-label",s?"Open Menu":"Close Menu"),t.classList.toggle("hidden"),n.classList.toggle("hidden"),o.classList.toggle("hidden")})}function u(){const e=document.getElementById("tags-dropdown"),t=document.getElementById("tags-menu");let n;!e||!t||(e.addEventListener("mouseenter",()=>{clearTimeout(n),t.classList.remove("hidden")}),e.addEventListener("mouseleave",()=>{n=setTimeout(()=>{t.classList.add("hidden")},100)}))}d();u();document.addEventListener("astro:after-swap",()=>{d(),u()});</script> <div class="mx-auto flex w-full max-w-3xl items-center justify-start px-2"><a id="back-button" href="/" class="group inline-block hover:text-accent focus-outline mt-8 mb-2 flex hover:text-foreground/75"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg><span>Go back</span></a></div><script type="module">function o(){const t=document.querySelector("#back-button"),e=sessionStorage.getItem("backUrl");e&&t&&(t.href=e)}document.addEventListener("astro:page-load",o);o();</script> <main id="main-content" class="mx-auto w-full max-w-3xl px-4 pb-12" data-pagefind-body> <h1 class="inline-block text-2xl font-bold text-accent sm:text-3xl" data-astro-transition-scope="astro-fam6wyqg-1"> [Google Cloud] GCP Compute Engine </h1> <div class="flex items-center gap-4"> <div class="flex items-end space-x-2 opacity-80 my-2"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 min-w-[1.375rem]"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M7 14h.013" /><path d="M10.01 14h.005" /><path d="M13.01 14h.005" /><path d="M16.015 14h.005" /><path d="M13.015 17h.005" /><path d="M7.01 17h.005" /><path d="M10.01 17h.005" /></svg> <span class="sr-only">Published:</span> <span class="text-sm italic sm:text-base"> <time datetime="2022-09-14T22:36:35.000Z">14 Sep, 2022</time> <span aria-hidden="true"> | </span> <span class="sr-only">&nbsp;at&nbsp;</span> <span class="text-nowrap">10:36 PM</span> </span> </div> <div class="opacity-80 max-sm:hidden"><span aria-hidden="true" class="max-sm:hidden">
|
</span><a class="space-x-1.5 hover:opacity-75" href="https://github.com/thuongnn/thuongnn.github.io/edit/master/src/data/blog/google-cloud/gcp-compute/gcp-compute-engine.md" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span class="italic max-sm:text-sm sm:inline">Suggest Changes</span></a></div> </div> <article id="article" class="mx-auto prose mt-8 max-w-3xl"> <h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#virtual-machine-types">Virtual <strong>Machine Types</strong></a>
<ul>
<li><a href="#general-purpose-workloads"><strong>General-purpose workloads</strong></a></li>
<li><a href="#optimized-workloads"><strong>Optimized workloads</strong></a></li>
<li><a href="#customize-workloads">Customize workloads</a></li>
</ul>
</li>
<li><a href="#virtual-machine-configure">Virtual <strong>Machine Configure</strong></a>
<ul>
<li><a href="#image">Image</a></li>
<li><a href="#internal-and-external-ip-addresses"><strong>Internal and External IP Addresses</strong></a></li>
<li><a href="#vm-instance-lifecycle--bootstrapping-with-startup-script">VM instance Lifecycle | <strong>Bootstrapping with Startup script</strong></a></li>
<li><a href="#vm-instance-template">VM Instance Template</a></li>
</ul>
</li>
<li><a href="#b%C3%A0i-to%C3%A1n-ti%E1%BA%BFt-ki%E1%BB%87m-chi-ph%C3%AD-s%E1%BB%AD-d%E1%BB%A5ng">Bài toán tiết kiệm chi phí sử dụng</a>
<ul>
<li><a href="#sustained-use-discounts"><strong>Sustained use discounts</strong></a></li>
<li><a href="#committed-use-discounts"><strong>Committed use discounts</strong></a></li>
<li><a href="#preemptible-vm"><strong>Preemptible VM</strong></a></li>
</ul>
</li>
<li><a href="#t%E1%BB%95ng-k%E1%BA%BFt">Tổng kết</a>
<ul>
<li><a href="#m%E1%BB%99t-s%E1%BB%91-ch%C3%BA-%C3%BD-%C4%91%E1%BB%91i-v%E1%BB%9Bi-virtual-machine">Một số chú ý đối với Virtual Machine</a></li>
<li><a href="#virtual-machine---best-practices"><strong>Virtual Machine - Best Practices</strong></a></li>
</ul>
</li>
</ul>
<p></p></details><p></p>
<h2 id="overview">Overview</h2>
<p><img src="https://github.com/user-attachments/assets/633b8074-63b6-4272-8896-1bfb4c063639" alt="Untitled"></p>
<h2 id="virtual-machine-types">Virtual <strong>Machine Types</strong></h2>
<p>Google Compute Engine hỗ trợ nhiều họ Machine khác nhau phục vụ cho những trường hợp cụ thể khác nhau.</p>
<h3 id="general-purpose-workloads"><strong>General-purpose workloads</strong></h3>
<ul>
<li>Cost-optimized (E2)
<ul>
<li>Day-to-day computing với chi phí thấp.</li>
<li>Trường hợp sử dụng
<ul>
<li>Web serving</li>
<li>App serving</li>
<li>Back office apps</li>
<li>Small-medium databases</li>
<li>Microservices</li>
<li>Virtual desktops</li>
<li>Development environments</li>
</ul>
</li>
</ul>
</li>
<li>Balanced (N2, N2D, N1)
<ul>
<li>Loại VM cân bằng giữa giá cả và hiệu năng.</li>
<li>Trường hợp sử dụng
<ul>
<li>Web serving</li>
<li>App serving</li>
<li>Back office apps</li>
<li>Medium-large databases</li>
<li>Cache</li>
<li>Media/streaming</li>
</ul>
</li>
</ul>
</li>
<li>Scale-out optimized (Tau T2D, Tau T2D)
<ul>
<li>Loại VM có hiệu năng với chi phí tốt phù hợp cho các scale-out workloads.</li>
<li>Trường hợp sử dụng
<ul>
<li>Scale-out workloads</li>
<li>Web serving</li>
<li>Containerized microservices</li>
<li>Media transcoding</li>
<li>Large-scale Java applications</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="optimized-workloads"><strong>Optimized workloads</strong></h3>
<ul>
<li>Memory-optimized (M2, M1)
<ul>
<li>Loại VM này thường dùng cho những workload đặc thù cần nhiều RAM</li>
<li>Trường hợp sử dụng
<ul>
<li>Medium-large in-memory databases such as SAP HANA</li>
<li>In-memory databases and in-memory analytics</li>
<li>Microsoft SQL Server and similar databases</li>
</ul>
</li>
</ul>
</li>
<li>Compute-optimized (C2, C2D)
<ul>
<li>VM có hiệu năng CPU cực cao chuyên dùng cho các workload cần tính toán nhiều.</li>
<li>Trường hợp sử dụng
<ul>
<li>Compute-bound workloads</li>
<li>High-performance web serving</li>
<li>Gaming (AAA game servers)</li>
<li>Ad serving</li>
<li>High-performance computing (HPC)</li>
<li>Media transcoding</li>
<li>AI/ML</li>
</ul>
</li>
</ul>
</li>
<li>Accelerator-optimized (A2)
<ul>
<li>Sử dụng cho những workload đặc thù cần hiệu năng GPU cao.</li>
<li>Trường hợp sử dụng
<ul>
<li>CUDA-enabled ML training and inference</li>
<li>HPC</li>
<li>Massive parallelized computation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="customize-workloads">Customize workloads</h3>
<ul>
<li>Trong một số trường hợp chúng ta có thể tuỳ chỉnh VM instance mà chúng ta muốn tạo, Google Compute có thể hỗ trợ việc này.</li>
<li>Trường hợp sử dụng
<ul>
<li>Chúng ta muốn một VM instance phù hợp với yêu cầu hệ thống hiện tại mà các loại workload ở trên không đáp ứng được.</li>
<li>Một hệ thống đặc thù cần mở rộng nhiều RAM, CPU hơn với các options ở trên.</li>
</ul>
</li>
<li>Một số yêu cầu tuỳ chỉnh của RAM và CPU
<ul>
<li>vCPU chọn ít nhất là 1vCPU hoặc lớn hơn thì phải là số chẵn</li>
<li>Dung lượng RAM sẽ limit theo số lượng CPU được chọn, thông thường là <strong>0.9GB RAM / 1 vCPU</strong> và <strong>có thể nâng lên tối đa 6.5GB RAM / 1vCPU</strong>.</li>
<li>Tổng dung lượng RAM phải là bội số của 256MB</li>
</ul>
</li>
</ul>
<h2 id="virtual-machine-configure">Virtual <strong>Machine Configure</strong></h2>
<h3 id="image">Image</h3>
<ul>
<li>Phải có image khi khởi tạo một VM trên Google Cloud, trong image thì chứa OS và các phần mềm đã được cài đặt sẵn trên đó tuỳ từng loại image khác nhau.</li>
<li>Phân biệt 02 loại image:
<ul>
<li><strong>Public Images</strong> - được cung cấp và bảo trì bởi Google hoặc các image được tạo ra bởi các tổ chức vendor khác, cộng đồng Open source.
<ul>
<li>Linux (CentOS, CoreOS, Debian, <strong>RHEL</strong>, <strong>SUSE</strong>, Ubuntu, openSUSE, and FreeBSD)</li>
<li>Windows (Windows Server 2019, 2016, 2012-r2; SQL Server pre-installed on Windows)</li>
</ul>
</li>
<li><strong>Custom Images</strong> - chúng ta có thể tự tạo riêng một image để sử dụng.</li>
</ul>
</li>
</ul>
<h3 id="internal-and-external-ip-addresses"><strong>Internal and External IP Addresses</strong></h3>
<ul>
<li>Địa chỉ <strong>External</strong> (Public) IP là địa chỉ có thể được truy cập bởi mạng internet công khai, bất cứ ai cũng có thể truy cập được.</li>
<li>Địa chỉ <strong>Internal</strong> (Private) IP là địa chỉ nội bộ nằm trong subnet mạng của VPC.</li>
<li>Địa chỉ External IP thì không thể bị trùng khi tạo VM, còn Internal IP thì có thể bị trùng trong một số trường hợp (nằm ở 02 VPC khác nhau hoặc On-Premise với Google Cloud VPC)</li>
<li>Tất cả các VM instances đều phải có ít nhất 01 địa chỉ Internal IP.</li>
<li>Địa chỉ External IP là tuỳ chọn khi khởi tạo Virtual Machine, có thể disable nếu không dùng đến. Chú ý là địa chỉ External IP nếu không cấu hình Static IP thì nó sẽ bị mất và thay đổi mỗi lần Start/Stop VM.</li>
</ul>
<p><strong><code>Static IP Addresses</code></strong></p>
<ul>
<li>Tạo một địa chỉ Static IP trong trường hợp muốn giữ địa chỉ này không bị mất hay thay đổi trong quá trình Start/Stop VM instance, một Static IP Address thì có thể được gán sang một VM instance khác nhau trong cùng một GCP Project.</li>
<li>Static IP Address vẫn sẽ được gán vào một VM instance ngay cả khi nó đã bị Stop, chúng ta có thể bỏ gán nó ra bằng cách manual configure.</li>
<li>Khi tạo ra Static IP Address thì đã bị tính tiền rồi, ngay cả khi không sử dụng nó.</li>
</ul>
<h3 id="vm-instance-lifecycle--bootstrapping-with-startup-script">VM instance Lifecycle | <strong>Bootstrapping with Startup script</strong></h3>
<p><img src="https://github.com/user-attachments/assets/823cd240-a1a4-48c0-845e-b7ad75b56696" alt="Untitled"></p>
<ul>
<li>
<p>GCP hỗ trợ cấu hình Startup hoặc Shutdown Script dùng để thực thi khi có sự kiện tương ứng (tham khảo trong hình trên)</p>
</li>
<li>
<p>Ví dụ một Startup Script:</p>
<pre class="astro-code astro-code-themes min-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"><span style="color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">apt</span><span style="color:#2B5581;--shiki-dark:#ECC48D"> update</span></span>
<span class="line"><span style="color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">apt</span><span style="color:#2B5581;--shiki-dark:#82AAFF"> -y</span><span style="color:#2B5581;--shiki-dark:#ECC48D"> install</span><span style="color:#2B5581;--shiki-dark:#ECC48D"> apache2</span></span>
<span class="line"><span style="color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic">echo</span><span style="color:#22863A;--shiki-dark:#D9F5DD"> "</span><span style="color:#22863A;--shiki-dark:#ECC48D">Hello world from $(</span><span style="color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">hostname</span><span style="color:#22863A;--shiki-dark:#ECC48D">) $(</span><span style="color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">hostname</span><span style="color:#2B5581;--shiki-dark:#82AAFF"> -I</span><span style="color:#22863A;--shiki-dark:#ECC48D">)</span><span style="color:#22863A;--shiki-dark:#D9F5DD">"</span><span style="color:#D32F2F;--shiki-dark:#7FDBCA"> ></span><span style="color:#2B5581;--shiki-dark:#ECC48D"> /var/www/html/index.html</span></span></code></pre>
<p>Tự động cập nhật OS và cài đặt Apache Web server lên trên OS này.</p>
</li>
</ul>
<h3 id="vm-instance-template">VM Instance Template</h3>
<ul>
<li>Nôm na là tạo một template sẵn để có thể tạo dễ dàng các VM instances với những tham số đã định nghĩa trong template, có thể sử dụng để tạo mới một VM instance hoặc tạo managed instance groups (MIGs).</li>
<li>Trong Instance templates có thể định nghĩa <strong>machine type</strong>, <strong>boot disk image</strong> hoặc <strong>container image</strong>, <strong>labels</strong>, <strong>startup script</strong>, và nhiều properties khác nữa. Hướng dẫn tạo VM Instance Template <a href="https://cloud.google.com/compute/docs/instance-templates/create-instance-templates">ở đây</a>.</li>
<li><strong>Không thể cập nhật VM Instance Template</strong>, thay vào đó thì có thể clone ra để chỉnh sửa nó.</li>
</ul>
<h2 id="bài-toán-tiết-kiệm-chi-phí-sử-dụng">Bài toán tiết kiệm chi phí sử dụng</h2>
<ul>
<li>Chúng ta sẽ bị tính tiền cho mỗi phút chạy của VM instance, sau khoảng thời gian tối thiểu là 1 phút.</li>
<li>Không bị tính tiền khi con VM instance bị stop, tuy nhiên các tài nguyên khác như Storage hay Static IP thì vẫn bị tính tiền như thường (tính tiền riêng theo biểu đồ chi phí tài nguyên đó).</li>
<li><strong><code>RECOMMENDATION</code></strong> là luôn luôn tạo <strong>Budget alerts</strong> để cảnh báo mức chi phí sử dụng VM instances.</li>
<li>Để tiết kiệm chi phí hơn thì có mấy cách sau:
<ul>
<li>Ước lượng và lựa chọn loại machine phù hợp nhất với nhu cầu để tránh lãng phí tài nguyên.</li>
<li>Phương án discount của GCP
<ul>
<li>Sustained use discounts</li>
<li>Committed use discounts</li>
<li>Discounts for preemptible VM instances</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="sustained-use-discounts"><strong>Sustained use discounts</strong></h3>
<p><img src="https://github.com/user-attachments/assets/0655be92-c940-4632-bdb4-3382d6b918d3" alt="Untitled"></p>
<ul>
<li><strong>Tự động giảm giá thành sử dụng VM instances</strong> khi sử dụng liên tục trong tháng, discount sẽ tự động trừ vào hoá đơn hàng tháng.
<ul>
<li>Ví dụ nếu như sử dụng loại machine là N1, N2 với thời gian sử dụng hơn 25% tổng thời gian của một tháng, chúng ta có thể nhận ưu đãi 20-50% giá thành được tính cho mỗi phút cộng dồn tiếp theo.</li>
<li>Sử dụng liên tục càng lâu thì giảm giá càng sâu, như đồ thị ở trên.</li>
<li>Không cần phải cấu hình gì cả, GCP sẽ tự động giảm giá sử dụng VM instance.</li>
</ul>
</li>
<li>Có thể áp dụng cho các instances được tạo bởi <strong>Google Kubernetes Engine</strong> và <strong>Compute Engine</strong>.</li>
<li><strong>KHÔNG</strong> được áp dụng cho một số loại machine (Ví dụ như E2 và A2).</li>
<li><strong>KHÔNG</strong> được áp dụng cho VMs được tạo bởi App Engine và Dataflow.</li>
</ul>
<h3 id="committed-use-discounts"><strong>Committed use discounts</strong></h3>
<ul>
<li>Phù hợp cho những loại workloads mà chúng ta dự trù được tài nguyên cũng như thời gian sử dụng.</li>
<li>Cam kết sử dụng liên tục trong vòng 1 hoặc 3 năm.</li>
<li>Có thể được giảm giá thành sử dụng lên tới 70% tuỳ theo từng loại machine và GPUs.</li>
<li>Có thể áp dụng cho các instances được tạo bởi <strong>Google Kubernetes Engine</strong> và <strong>Compute Engine</strong>.</li>
<li><strong>KHÔNG</strong> được áp dụng cho VMs được tạo bởi App Engine và Dataflow.</li>
</ul>
<h3 id="preemptible-vm"><strong>Preemptible VM</strong></h3>
<ul>
<li>Là các phiên bản VM được sử dụng trong thời gian ngắn nhưng có thể tiết kiệm chi phí lên tới 80%. Tuy nhiên sẽ có một số đặc điểm sau:
<ul>
<li>Có thể bị dừng bất cứ lúc nào bởi GCP (force stop) trong vòng 24h.</li>
<li>Instances sẽ nhận được 30s cảnh báo trước khi bị force stop (thời gian này có thể thực hiện lưu lại những gì cần thiết của workload)</li>
</ul>
</li>
<li>Sử dụng Preemptible VM trong các trường hợp sau:
<ul>
<li>Ứng dụng chịu lỗi tốt bởi VM sẽ bị force stop bất cứ lúc nào, ứng dụng chấp nhận việc đó và không bị ảnh hưởng gì.</li>
<li>Ứng dụng chạy những workload không phải ngay lập tức, kiểu như rảnh lúc chạy cũng được.</li>
<li>Ví dụ như các batch processing jobs không cần chạy ngay lập tức.</li>
<li>Tất nhiên lý do chủ yếu là để tiết kiệm chi phí, nếu dư giả tài chính thì không nên sử dụng thằng này.</li>
</ul>
</li>
<li>Một số hạn chế:
<ul>
<li>Không phải lúc nào cũng khả dụng để chạy, có những lúc GCP không dư giả những VM kiểu như này cho để chạy.</li>
<li>Không đảm bảo SLA, không thể migrate sang loại VM thông thường.</li>
<li>Không tự động restarts.</li>
<li>Không áp dụng cho Free Tier credits.</li>
</ul>
</li>
</ul>
<h2 id="tổng-kết">Tổng kết</h2>
<h3 id="một-số-chú-ý-đối-với-virtual-machine">Một số chú ý đối với Virtual Machine</h3>
<ul>
<li>Loại tài nguyên này được gắn với Project.</li>
<li>Machine type thì có thể khả dụng hay không tuỳ theo Region hoặc Zone khác nhau.</li>
<li>Chúng ta <strong>không thể thay đổi Machine type</strong> của một VM instance đang running.</li>
<li>Có thể lọc các VM instances dự trên nhiều thuộc tính khác nhau như: <em>Name, Zone, Machine Type, Internal/External IP, Network, Labels etc</em></li>
<li>VM instances là tài nguyên Zonal (đại loại là nó được chạy trong một Zone cụ thể trong một Region cụ thể)
<ul>
<li>Image thì là Global (nôm na là chúng ta có thể truy cập vào một image từ nhiều Project khác nhau)</li>
<li>Instance templates cũng là Global (trừ một số trường hợp cấu hình Instance template chỉ chạy trong một Zone cụ thể)</li>
</ul>
</li>
<li>Tự động được cấu hình theo dõi một số thông số cơ bản:
<ul>
<li><strong>Các metrics mặc định</strong>: CPU utilization, Network Bytes (in/out), Disk Throughput/IOPS</li>
<li>Đối với <strong>Memory Utilization</strong> &#x26; <strong>Disk Space Utilization</strong> thì cần cài đặt Agent.</li>
</ul>
</li>
</ul>
<h3 id="virtual-machine---best-practices"><strong>Virtual Machine - Best Practices</strong></h3>
<ul>
<li>Lựa chọn <strong>Zone</strong> và <strong>Region</strong> dự trên:
<ul>
<li>Chi phí, quy định, mức độ khả dụng cần thiết, độ trễ và yêu cầu Hardware cụ thể.</li>
<li>Triển khai VM instances phân tán trên nhiều Zones và Regions để đạt độ khả dụng cao.</li>
</ul>
</li>
<li>Lựa chọn Machine type sao cho phù hợp:
<ul>
<li>Nên chạy thử nghiệm ứng dụng trên các loại Machine type để lấy thêm đánh giá.</li>
<li>Sử dụng GPUs cho trường hợp ứng dụng cần tính toán chuyên sâu và đồ hoạ.</li>
</ul>
</li>
<li>Ước lượng và lên plan cho các workloads chạy dài hạn để áp dụng <strong>“committed use discounts”</strong> cho tiết kiệm chi phí.</li>
<li>Sử dụng <strong>preemptible instances</strong> cho các ứng dụng chịu lỗi tốt (fault-tolerant), chạy bất cứ lúc nào cũng được (ứng dụng không cần chạy ngay lập tức)</li>
<li>Sử dụng <strong>labels</strong> để đánh nhãn theo môi trường triển khai, team dự án, loại business,… để phân loại quản lý.</li>
</ul> </article> <hr class="my-8 border-dashed"> <div class="opacity-80 sm:hidden"><span aria-hidden="true" class="max-sm:hidden">
|
</span><a class="space-x-1.5 hover:opacity-75" href="https://github.com/thuongnn/thuongnn.github.io/edit/master/src/data/blog/google-cloud/gcp-compute/gcp-compute-engine.md" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span class="italic max-sm:text-sm sm:inline">Suggest Changes</span></a></div> <ul class="mt-4 mb-8 sm:my-8"> <li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/google-cloud/" class="relative pr-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 text-sm" data-astro-transition-scope="astro-36ssibgs-2"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -mr-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>Google Cloud</span> </a> </li> </ul> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZQIRKt" component-url="/_astro/Comments.pnnUQGGQ.js" component-export="default" renderer-url="/_astro/client.BPIbHqJh.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> <div class="mt-4 flex flex-col items-center justify-between gap-6 sm:flex-row sm:items-end sm:gap-4"> <div class="flex flex-col flex-wrap items-center justify-center gap-1 sm:items-start"> <span class="italic">Share this post on:</span> <div class="text-center"> <a href="https://wa.me/?text=https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via WhatsApp"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg> <span class="sr-only">Share this post via WhatsApp</span> </a><a href="https://www.facebook.com/sharer.php?u=https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Facebook"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg> <span class="sr-only">Share this post on Facebook</span> </a><a href="https://x.com/intent/post?url=https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on X"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg> <span class="sr-only">Share this post on X</span> </a><a href="https://t.me/share/url?url=https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via Telegram"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg> <span class="sr-only">Share this post via Telegram</span> </a><a href="https://pinterest.com/pin/create/button/?url=https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Pinterest"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 20l4 -9" /><path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /></svg> <span class="sr-only">Share this post on Pinterest</span> </a><a href="mailto:?subject=See%20this%20post&#38;body=https://thuongnn.dev/posts/google-cloud/gcp-compute/gcp-compute-engine/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via email"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Share this post via email</span> </a> </div> </div> <button id="back-to-top" class="focus-outline py-1 whitespace-nowrap hover:opacity-75"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <span>Back to Top</span> </button> </div> <hr class="my-6 border-dashed"> <!-- Previous/Next Post Buttons --> <div data-pagefind-ignore class="grid grid-cols-1 gap-6 sm:grid-cols-2"> <a href="/posts/google-cloud/gcp-compute/gcp-app-engine" class="flex w-full gap-1 hover:opacity-75"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <div> <span>Previous Post</span> <div class="text-sm text-accent/85">[Google Cloud] GCP App Engine</div> </div> </a> <a href="/posts/google-cloud/identity-and-access-management-iam" class="flex w-full justify-end gap-1 text-right hover:opacity-75 sm:col-start-2"> <div> <span>Next Post</span> <div class="text-sm text-accent/85">[Google Cloud] Identity and Access Management (IAM)</div> </div> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 6l6 6l-6 6" /></svg> </a> </div> </main> <footer class="w-full mt-auto"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-border" aria-hidden="true"> </div> <div class="flex flex-col items-center justify-between py-6 sm:flex-row-reverse sm:py-4"> <div class="flex-wrap justify-center gap-1 flex"> <a href="https://github.com/thuongnn" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title=" thuongnn.dev on Github"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg> <span class="sr-only"> thuongnn.dev on Github</span> </a><a href="https://www.facebook.com/thuongnn97" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="thuongnn.dev on Facebook"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg> <span class="sr-only">thuongnn.dev on Facebook</span> </a><a href="https://www.linkedin.com/in/thuongnn/" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="thuongnn.dev on LinkedIn"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 11v5" /><path d="M8 8v.01" /><path d="M12 16v-5" /><path d="M16 16v-3a2 2 0 1 0 -4 0" /><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" /></svg> <span class="sr-only">thuongnn.dev on LinkedIn</span> </a><a href="mailto:thuongnn1997@gmail.com" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Send an email to thuongnn.dev"> <svg viewBox="0 0 24 24" role="img"  width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Send an email to thuongnn.dev</span> </a> </div> <div class="my-2 flex flex-col items-center whitespace-nowrap sm:flex-row"> <span>Copyright &#169; 2025</span> <span class="hidden sm:inline">&nbsp;|&nbsp;</span> <span>All rights reserved.</span> </div> </div> </footer>  </body></html> <script data-astro-rerun>
  /** Create a progress indicator
   *  at the top */
  function createProgressBar() {
    // Create the main container div
    const progressContainer = document.createElement("div");
    progressContainer.className =
      "progress-container fixed top-0 z-10 h-1 w-full bg-background";

    // Create the progress bar div
    const progressBar = document.createElement("div");
    progressBar.className = "progress-bar h-1 w-0 bg-accent";
    progressBar.id = "myBar";

    // Append the progress bar to the progress container
    progressContainer.appendChild(progressBar);

    // Append the progress container to the document body or any other desired parent element
    document.body.appendChild(progressContainer);
  }
  createProgressBar();

  /** Update the progress bar
   *  when user scrolls */
  function updateScrollProgress() {
    document.addEventListener("scroll", () => {
      const winScroll =
        document.body.scrollTop || document.documentElement.scrollTop;
      const height =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      if (document) {
        const myBar = document.getElementById("myBar");
        if (myBar) {
          myBar.style.width = scrolled + "%";
        }
      }
    });
  }
  updateScrollProgress();

  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    const headings = Array.from(
      document.querySelectorAll("h2, h3, h4, h5, h6")
    );
    for (const heading of headings) {
      heading.classList.add("group");
      const link = document.createElement("a");
      link.className =
        "heading-link ml-2 opacity-0 group-hover:opacity-100 focus:opacity-100";
      link.href = "#" + heading.id;

      const span = document.createElement("span");
      span.ariaHidden = "true";
      span.innerText = "#";
      link.appendChild(span);
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    const copyButtonLabel = "Copy";
    const codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (const codeBlock of codeBlocks) {
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      const copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute right-3 -top-3 rounded bg-muted px-2 py-1 text-xs leading-4 text-foreground font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      const code = block.querySelector("code");
      const text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();

  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    document.querySelector("#back-to-top")?.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  }
  backToTop();

  /* Go to page start after page swap */
  document.addEventListener("astro:after-swap", () =>
    window.scrollTo({ left: 0, top: 0, behavior: "instant" })
  );
</script>