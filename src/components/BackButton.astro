---
import IconChevronLeft from "@/assets/icons/IconChevronLeft.svg";
import LinkButton from "./LinkButton.astro";
import { SITE } from "@/config";
---

{
  SITE.showBackButton && (
    <div class="mx-auto flex w-full max-w-3xl items-center justify-start px-2">
      <LinkButton
        id="back-button"
        href="/"
        class="focus-outline mt-8 mb-2 flex hover:text-foreground/75"
      >
        <IconChevronLeft class="inline-block size-6" />
        <span>Go back</span>
      </LinkButton>
    </div>
  )
}

<script>
  function handleBackButton() {
    const backButton = document.getElementById("back-button");
    if (!backButton) return;

    backButton.addEventListener("click", e => {
      // Kiểm tra xem có trang trước đó không
      if (window.history.length > 1) {
        e.preventDefault(); // Ngăn chặn hành vi mặc định của link
        window.history.back();
      }
      // Nếu không có trang trước đó, để link hoạt động bình thường (về home)
    });
  }

  document.addEventListener("astro:page-load", handleBackButton);
  handleBackButton();
</script>
